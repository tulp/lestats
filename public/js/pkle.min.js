if(PK===void 0)var PK=new function(){this.check_namespace=function(a){this[a]===void 0&&(this[a]={});return this[a]}};PK.remove_holes_in_array=function(a){if(a&&a.length!=0)for(var b=0;b<a.length;)a[b]===void 0?a.splice(b,1):b++};PK.is_value_in_array=function(a,b){if(a.constructor.toString().indexOf("Array")==-1)return!1;for(var c=0;c<a.length;c++)if(a[c]==b)return!0;return!1};function assert(a,b){if(a)return a;CRITICAL_ERROR("Assertion failed: "+String(b))};PK===void 0&&(PK=new function(){this.check_namespace=function(a){this[a]===void 0&&(this[a]={});return this[a]}});if(!window.Base64)var Base64={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(a){for(var b="",c,d,e,f,g,h,i=0,a=Base64._utf8_encode(a);i<a.length;)c=a.charCodeAt(i++),d=a.charCodeAt(i++),e=a.charCodeAt(i++),f=c>>2,c=(c&3)<<4|d>>4,g=(d&15)<<2|e>>6,h=e&63,isNaN(d)?g=h=64:isNaN(e)&&(h=64),b=b+this._keyStr.charAt(f)+this._keyStr.charAt(c)+this._keyStr.charAt(g)+this._keyStr.charAt(h);return b},decode:function(a){for(var b="",c,d,e,f,g,h=0,a=a.replace(/[^A-Za-z0-9\+\/\=]/g,
"");h<a.length;)c=this._keyStr.indexOf(a.charAt(h++)),d=this._keyStr.indexOf(a.charAt(h++)),f=this._keyStr.indexOf(a.charAt(h++)),g=this._keyStr.indexOf(a.charAt(h++)),c=c<<2|d>>4,d=(d&15)<<4|f>>2,e=(f&3)<<6|g,b+=String.fromCharCode(c),f!=64&&(b+=String.fromCharCode(d)),g!=64&&(b+=String.fromCharCode(e));return b=Base64._utf8_decode(b)},_utf8_encode:function(a){for(var a=a.replace(/\r\n/g,"\n"),b="",c=0;c<a.length;c++){var d=a.charCodeAt(c);d<128?b+=String.fromCharCode(d):(d>127&&d<2048?b+=String.fromCharCode(d>>
6|192):(b+=String.fromCharCode(d>>12|224),b+=String.fromCharCode(d>>6&63|128)),b+=String.fromCharCode(d&63|128))}return b},_utf8_decode:function(a){for(var b="",c=0,d=c1=c2=0;c<a.length;)d=a.charCodeAt(c),d<128?(b+=String.fromCharCode(d),c++):d>191&&d<224?(c2=a.charCodeAt(c+1),b+=String.fromCharCode((d&31)<<6|c2&63),c+=2):(c2=a.charCodeAt(c+1),c3=a.charCodeAt(c+2),b+=String.fromCharCode((d&15)<<12|(c2&63)<<6|c3&63),c+=3);return b}};PK.browser_dom=new function(){var a=0,b=Number.MAX_VALUE;this.reset_id_generation=function(){a=0};this.generated_id=function(){a===b&&(LOG("Warning: PK.browser_dom.last_id_ was reset"),this.reset_id_generation());return"pk_"+ ++a};this.get_object_by_id=function(c){if(document.getElementById)return document.getElementById(c);assert(!1,"document.getElementById() not supported!")};this.get_obj_position=function(c){for(var a=0,b=0;c;)b+=c.offsetLeft,a+=c.offsetTop,c=c.offsetParent;return[b,a]};this.get_mouse_position=
function(){var c=0,a=0,b=window.event;if(b.pageX||b.pageY)c=b.pageX,a=b.pageY;else if(b.clientX||b.clientY)c=b.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,a=b.clientY+document.body.scrollTop+document.documentElement.scrollTop;return[c,a]}};(function(){var a=!1,b=/xyz/.test(function(){})?/\b_super\b/:/.*/;this.Class=function(){};Class.extend=function(c){function d(){!a&&this.init&&this.init.apply(this,arguments)}var e=this.prototype;a=!0;var f=new this;a=!1;for(var g in c)f[g]=typeof c[g]=="function"&&typeof e[g]=="function"&&b.test(c[g])?function(c,a){return function(){var d=this._super;this._super=e[c];var b=a.apply(this,arguments);this._super=d;return b}}(g,c[g]):c[g];d.prototype=f;d.prototype.constructor=d;d.extend=arguments.callee;
return d}})();PK.clone=function(a){if(typeof a!="object"||a==null)return a;var b=a.constructor(),c;for(c in a)b[c]=PK.clone(a[c]);return b};PK.code_highlighting=new function(){window.hljs?(hljs.initHighlightingOnLoad(),this.highlight=function(a,b){b===void 0&&(b="lua");var c=PK.entityify_and_escape_quotes(a),d=document.getElementById("highlight-view");if(!d)return CRITICAL_ERROR("No 'highlight-view' div necessary for code highlighting!"),"<pre>"+c+"</pre>";d.innerHTML='<pre><code class="'+b+'">'+c+"</code></pre>";hljs.highlightBlock(d.firstChild.firstChild);c=d.innerHTML;d.innerHTML="";return c}):this.highlight=function(a){return"<pre>"+
PK.entityify_and_escape_quotes(a)+"</pre>"}};PK.check_namespace("Cookies");PK.Cookies.set_longlive_cookie=function(a,b,c){c=c||{};c.expires=365;$.cookie(a,b,c)};PK.init_history=function(){Ext.History.init();Ext.History.on("change",function(a){var b="",c=[];a&&(c=a.split(PK.navigation.tokenDelimiter),b=c[0],c.splice(0,1));PK.navigation.show_topic(b,c)})};PK.i18n=new function(){var a=this,b={},c=void 0;this.language={};this.set_current_language=function(a){c=a};this.get_current_language=function(){return c};this.add_language_pack=function(a,e){c===void 0&&this.set_current_language(a);b[a]=e;this.language[a]=a};this.extend_language_pack=function(a,c){if(b[a]==void 0)this.add_language_pack(a,c);else for(var f in c)b[a][f]=c[f]};this.raw_text=function(a){var e="";c===void 0?(CRITICAL_ERROR("Current language not set! Text: "+a),e="<"+a+">"):b[c]?e=b[c][a]:
(CRITICAL_ERROR("No language pack for "+c+". Text: "+a),e="<"+a+">");return e};this.text=function(c){var b=a.raw_text(c);if(b===void 0)return"*"+c+"*";var f=[];arguments.length>1&&(f=Array.prototype.slice.call(arguments,1));f.unshift(b);return PK.formatString.apply(window,f)}};var I18N=PK.i18n.text;if(!this.JSON)this.JSON={};
(function(){function a(a){return a<10?"0"+a:a}function b(a){e.lastIndex=0;return e.test(a)?'"'+a.replace(e,function(a){var c=h[a];return typeof c==="string"?c:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function c(a,d){var e,h,k,o,r=f,q,p=d[a];p&&typeof p==="object"&&typeof p.toJSON==="function"&&(p=p.toJSON(a));typeof i==="function"&&(p=i.call(d,a,p));switch(typeof p){case "string":return b(p);case "number":return isFinite(p)?String(p):"null";case "boolean":case "null":return String(p);
case "object":if(!p)return"null";f+=g;q=[];if(Object.prototype.toString.apply(p)==="[object Array]"){o=p.length;for(e=0;e<o;e+=1)q[e]=c(e,p)||"null";k=q.length===0?"[]":f?"[\n"+f+q.join(",\n"+f)+"\n"+r+"]":"["+q.join(",")+"]";f=r;return k}if(i&&typeof i==="object"){o=i.length;for(e=0;e<o;e+=1)h=i[e],typeof h==="string"&&(k=c(h,p))&&q.push(b(h)+(f?": ":":")+k)}else for(h in p)Object.hasOwnProperty.call(p,h)&&(k=c(h,p))&&q.push(b(h)+(f?": ":":")+k);k=q.length===0?"{}":f?"{\n"+f+q.join(",\n"+f)+"\n"+
r+"}":"{"+q.join(",")+"}";f=r;return k}}if(typeof Date.prototype.toJSON!=="function")Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+a(this.getUTCMonth()+1)+"-"+a(this.getUTCDate())+"T"+a(this.getUTCHours())+":"+a(this.getUTCMinutes())+":"+a(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()};var d=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,
e=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,f,g,h={"\u0008":"\\b","\t":"\\t","\n":"\\n","\u000c":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},i;if(typeof JSON.stringify!=="function")JSON.stringify=function(a,d,b){var e;g=f="";if(typeof b==="number")for(e=0;e<b;e+=1)g+=" ";else typeof b==="string"&&(g=b);if((i=d)&&typeof d!=="function"&&(typeof d!=="object"||typeof d.length!=="number"))throw Error("JSON.stringify");return c("",
{"":a})};if(typeof JSON.parse!=="function")JSON.parse=function(a,c){function b(a,d){var e,g,f=a[d];if(f&&typeof f==="object")for(e in f)Object.hasOwnProperty.call(f,e)&&(g=b(f,e),g!==void 0?f[e]=g:delete f[e]);return c.call(a,d,f)}var e,a=String(a);d.lastIndex=0;d.test(a)&&(a=a.replace(d,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(a.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,
"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return e=eval("("+a+")"),typeof c==="function"?b({"":e},""):e;throw new SyntaxError("JSON.parse");}})();PK.log_system=new function(){var a=[],b=function(a){window.Ext?Ext.isReady&&Ext.Msg.alert("Failure",a):alert(a)};this.GUI_EOL="<br>";this.set_printer=function(a){b=a};this.get_printer=function(){return b};this.add=function(c){a[a.length]=c};this.list=function(){return a}};
var LOG=PK.log_system.add,GUI_ERROR=function(a){if(window.Ext)Ext.isReady?Ext.Msg.alert("Failure",a):LOG("GUI ERROR: "+a);else{var b=PK.log_system.get_printer();b&&b(a)}},CRITICAL_ERROR=function(a){var b;if(window.printStackTrace){var c=["********** Stack Trace **********"],c=c.concat(window.printStackTrace());c.splice(1,2);c.push("**********************************");b=a+"\n"+c.join("\n");a=a+PK.log_system.GUI_EOL+c.join(PK.log_system.GUI_EOL)}else b=a+"\n(Stack trace not available)\n\n";LOG("\nCRITICAL ERROR: "+
b);(b=PK.log_system.get_printer())&&b(a)};PK.check_namespace("Math");PK.Math.random_int=function(a,b){return Math.floor(Math.random()*(b-a+1))+a};PK.override_menu_item_to_enable_tooltips=function(){Ext.override(Ext.menu.Item,{onRender:function(a,b){if(!this.itemTpl)this.itemTpl=Ext.menu.Item.prototype.itemTpl=new Ext.XTemplate('<a id="{id}" class="{cls}" hidefocus="true" unselectable="on" href="{href}"','<tpl if="hrefTarget">',' target="{hrefTarget}"',"</tpl>",">",'<img src="{icon}" class="x-menu-item-icon {iconCls}"/>','<span class="x-menu-item-text">{text}</span>',"</a>");var c=this.getTemplateArgs();this.el=b?this.itemTpl.insertBefore(b,
c,!0):this.itemTpl.append(a,c,!0);this.iconEl=this.el.child("img.x-menu-item-icon");this.textEl=this.el.child(".x-menu-item-text");if(this.tooltip)this.tooltip=new Ext.ToolTip(Ext.apply({target:this.el,constrainPosition:!0,dismissDelay:0},Ext.isObject(this.tooltip)?this.tooltip:{html:this.tooltip}));Ext.menu.Item.superclass.onRender.call(this,a,b)},getTemplateArgs:function(){return{id:this.id,cls:this.itemCls+(this.menu?" x-menu-item-arrow":"")+(this.cls?" "+this.cls:""),href:this.href||"#",tooltip:this.tooltip,
hrefTarget:this.hrefTarget,icon:this.icon||Ext.BLANK_IMAGE_URL,iconCls:this.iconCls||"",text:this.itemText||this.text||" "}}})};PK.navigation=new function(){var a=!0,b;this.topic_makers={};this.topics={};this.tokenDelimiter="/";this.add_topic=function(a,d){this.topic_makers[a]=d};this.make_all_topics=function(){for(var a in this.topic_makers)this.topics[a]=this.topic_makers[a]();this.topic_makers={}};this.go_to_topic=function(a,d,b){var f=a?a:"";b===void 0&&(b=!1);if(d&&d.length)for(var g=0;g<d.length;g++)f+="/"+d[g];g=Ext.History.getToken();Ext.History.add(f);g==f&&b&&this.show_topic(a,d)};this.show_topic=function(c,d){LOG("navigator.show_topic(): "+
c);c||(c="index");b&&b.hide();var e=this.topics[c];if(e){if(b=e,e.show(d),a)document.title=I18N("Page title prefix")+(e.title?": "+e.title:"")}else GUI_ERROR("No topic: "+c)};this.must_set_doc_title=function(c){a=c}};PK.serialize_object=function(a,b){b===void 0&&(b="\n");if(typeof a=="string")return"'"+a+"'";var c="",d;for(d in a){var e=a[d];switch(typeof e){case "object":c+=d+": [Object]"+b;break;default:c+=d+": "+e+b}}return c};
PK.override_object_properties=function(a,b,c){if(!b)return a;a||(a={});for(var d in b)if(b[d]===!0)c[d]!==void 0?a[d]=c[d]:CRITICAL_ERROR("No mandatory data for "+d+"!");else if(typeof b[d]=="function"){var e=b[d](c[d]);e!==void 0&&(a[d]=e)}else if(typeof b[d]=="object")if(c[d]!==void 0)a[d]=c[d];else if(b[d].default_value!==void 0)a[d]=b[d].default_value;return a};PK.count_properties=function(a){var b=0;try{for(var c in a)b++}catch(d){CRITICAL_ERROR("It is not dictionary! "+a)}return b};PK.formatNumber=function(a,b){b===void 0&&(b=4);if(b==4){if(a<10)return"000"+a;if(a<100)return"00"+a;if(a<1E3)return"0"+a;a>=1E4&&CRITICAL_ERROR("Can't format big number!")}else if(b==3){if(a<10)return"00"+a;if(a<100)return"0"+a;a>=1E3&&CRITICAL_ERROR("Can't format big number!")}else if(b==2){if(a<10)return"0"+a;a>=100&&CRITICAL_ERROR("Can't format big number!")}return a};
PK.entityify_and_escape_quotes=function(a){if(typeof a=="number")return a;return a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")};
PK.split_using_placeholders=function(a,b){for(var c=0;;){c++;var d="${"+c+"}";if(a.indexOf(d)<0)break;a=a.replace(d,"{%_SEP_%}"+d+"{%_SEP_%}")}if(b)for(c=0;c<b.length;c++)d="${"+b[c]+"}",a.indexOf(d)>=0&&(a=a.replace(d,"{%_SEP_%}"+d+"{%_SEP_%}"));for(var d=a.split("{%_SEP_%}"),e=[],c=0;c<d.length;c++)d[c].match(/\$\{\d+\}/g)?e.push(Number(d[c].replace(/[\$\{\}]/g,""))):d[c]!=""&&e.push(d[c]);return e};
PK.fill_placeholders=function(a,b){var c=PK.split_using_placeholders(a,void 0);if(!c)return a;for(var d=[],e=0;e<c.length;e++)if(typeof c[e]=="number"){var f=c[e]-1;b.length>f?d=d.concat(b[f]):(CRITICAL_ERROR("Too big value placeholder number: "+b.length+"<="+f),window.console&&console.log&&console.log("[PK.fill_placeholders] failed on data:",a,b,c),LOG("s: "+a),LOG("ivalues: "+JSON.stringify(b,null,4)),LOG("Data: "+JSON.stringify(c,null,4)))}else d.push(c[e]);return d.join("")};
PK.formatString=function(){if(!(arguments.length<1)){var a=Array.prototype.slice.call(arguments),b=a.shift();return b=PK.fill_placeholders(b,a)}};PK.check_namespace("Time");PK.Time.get_current_timestamp=function(){return new Date*1-1};PK.Timer=new function(){this.make=function(){return new function(){var a,b;this.start=function(c){b=c;a=PK.Time.get_current_timestamp()};this.reset=function(){b=a=void 0};this.is_complete=function(){if(!a)return!0;if(PK.Time.get_current_timestamp()<a+b)return!1;this.reset();return!0}}}};Array.prototype.transpose=function(){var a=this.length?this.length:0,b=this[0]instanceof Array?this[0].length:0;if(b===0||a===0)return[];var c,d,e=[];for(c=0;c<b;c++){e[c]=[];for(d=0;d<a;d++)e[c][d]=this[d][c]}return e};if(typeof jQuery!=="undefined")jQuery.transpose=function(a){if(a instanceof Array)return a.transpose()};PK.make_undo_redo=function(a){assert(a>0,"Max depth for undo/redo must be a positive value");return new function(){var b=!1,c=[],d=[],e=void 0;this.Is_read_only=function(){return b};this.Make_read_only=function(a){b=a};this.Clear=function(){this.Is_read_only()||(c=[],d=[],e=void 0)};this.Can_undo=function(){return c.length>0};this.Can_redo=function(){return d.length>0};this.Before_do=function(b){this.Is_read_only()||(c.length+1>a&&c.shift(),c.push(PK.clone(b)),d=[],e=void 0)};this.Undo=function(a){if(!this.Is_read_only()&&
this.Can_undo())return d.push(PK.clone(a)),e=c.pop(),PK.clone(e)};this.Redo=function(){if(!this.Is_read_only()&&this.Can_redo())return assert(e!==void 0,"Undefined current memento"),c.push(e),e=d.pop(),PK.clone(e)}}};PK.Query=new function(){var a;this.init=function(b){a=$.parseQuery();PK.count_properties(a)==1&&a[""]=="undefined"&&(a={});b&&b(a);return a};this.get=function(b){if(a)return a[b]};this.get_bool=function(b){if(!a)return!1;return a[b]=="1"||a[b]=="yes"||a[b]=="YES"||a[b]=="on"||a[b]=="ON"||a[b]=="true"||a[b]=="TRUE"}};PK.WebStorage=new function(){var a=!1;this.available=function(){return a};this.init=function(){if(window.localStorage===void 0)return CRITICAL_ERROR(I18N("ERROR: no localStorage() support!")),!1;return a=!0};this.read_item=function(a){if(this.available()&&a)return localStorage.getItem(a)};this.set_item=function(a,c){if(this.available()&&a){try{localStorage.setItem(a,c)}catch(d){if(d==QUOTA_EXCEEDED_ERR)return CRITICAL_ERROR(I18N("WebStorage ERROR: QUOTA_EXCEEDED_ERR")),!1}return!0}};this.remove_item=
function(a){if(this.available()&&a)return localStorage.removeItem(a)}};if(PKLE===void 0){var PKLE=new function(){this.check_namespace=function(a){this[a]===void 0&&(this[a]={});return this[a]};this.INFINITE_PERIOD_MS=864E5};PK.check_namespace("LEWidgetsImpl");PK.LEWidgetsImpl=new function(){this.html=new function(){};this.extjs=new function(){}};PK.data_tree_node_processor_makers={};PK.data_tree_operations={};PK.data_tree_visitor_makers={}};if(PKLE===void 0)PKLE=new function(){this.check_namespace=function(a){this[a]===void 0&&(this[a]={});return this[a]};this.INFINITE_PERIOD_MS=864E5},PK.check_namespace("LEWidgetsImpl"),PK.LEWidgetsImpl=new function(){this.html=new function(){};this.extjs=new function(){}},PK.data_tree_node_processor_makers={},PK.data_tree_operations={},PK.data_tree_visitor_makers={};PK.data_node_helper=new function(){this.make_node=function(){return Object({id:PK.data_node_id.give_next_node_id()})};this.tooltip_keys=["t","/t"];this.make_tooltip_block=function(a){if(!a)return{tags:{"${t}":"","${/t}":""}};var b=PK.browser_dom.generated_id();return{id:b,text:a,tags:{"${t}":'<span id="'+b+'">',"${/t}":"</span>"}}};this.wrap_problematic_node=function(a,b){return PK.LEWidgets.make_container("problematic_node",[PK.LEWidgets.make_button("","icon-warning",b),a],void 0,"problematic-node",
!1,void 0)};this.clone_scopes=function(a,b){b===void 0&&(b=!0);if(!a||a.length==0||a.length==1&&a[0]==this.DEFAULT_SCOPE){if(b)return[]}else return PK.clone(a)};this.widget_container_type=Object({LIST:"list",LIST_ITEM:"list-item",LITERAL:"literal",RECORD:"record",OPTIONAL_RECORD_ELEMENT:"optional_record_element",VALUE:"value",VARIANT:"variant"});this.DEFAULT_SCOPE="";this.DEFAULT_RENDER_TEMPLATE="${MENU}${1}";this.DEFAULT_SIMPLE_VALUE_RENDER_TEMPLATE="${1}${MENU}";this.fill_placeholders=function(a,
b,c){for(var d=[],e=0;e<a.length;e++)if(typeof a[e]=="number"){var f=a[e]-1;b&&b.length>f?d=d.concat(b[f]):(CRITICAL_ERROR("Too big value placeholder number: "+b.length+"<="+f),LOG(Ext.encode(a)))}else c&&c[a[e]]!==void 0?d.push(PK.LEWidgets.make_label(c[a[e]])):d.push(PK.LEWidgets.make_label(a[e]));return d};this.extract_top_level_delegates=function(a){if(a&&a.length!=0){for(var b=[],c=0;c<a.length;c++)a[c].delegate_to_top_level&&(b.push(a[c]),a[c]=void 0);PK.remove_holes_in_array(a);if(b.length!=
0)return b}};this.get_scoped_value=function(a,b,c){assert(b,"Scopes not defined");assert(typeof b=="object","Scopes must be an array, not '"+typeof b+"'");if(a){if(typeof a=="string"||typeof a=="number"||typeof a=="function")return a;assert(typeof a=="object","Scoped values must be an object or a string/number/function, not '"+typeof a+"'");var d=void 0;c&&b.unshift(this.DEFAULT_SCOPE);for(var e=b.length-1;e>=0;e--){var f=b[e];if(a[f]){d=a[f];break}}c&&b.shift();return d}};this.make_simple_value_render_template=
function(a){if(!a)return!1;if(a===!0)a=this.DEFAULT_SIMPLE_VALUE_RENDER_TEMPLATE;return PK.split_using_placeholders(a,["MENU"])};this.generate_css_class_name=function(a,b,c){b=this.get_scoped_value(b,c,!0);if(b!==void 0)return b;return a}};PK.data_node_id=new function(){var a=0,b=Number.MAX_VALUE;this.reset_node_id_generation=function(){a=0};this.notify_existing_node_id=function(c){assert(typeof c=="number");c>a&&(a=c)};this.give_next_node_id=function(){a===b&&(LOG("Warning: PK.data_node_id.last_node_id_ was reset"),this.reset_node_id_generation());return++a};this.make_node_id=function(a){if(a)return assert(a.id,"No node id!"),a.id}};PKLE.node_list_const=new function(){this.CUSTOM_CHILD_NODE_TYPES={};this.COMMON_KEY_VALUES={"${li}":"<li>","${/li}":"</li>","${t}":"","${/t}":"","${new}":""};this.COMMON_KEYS=[];for(var a in this.COMMON_KEY_VALUES)this.COMMON_KEYS.push(a.substring(2,a.length-1))};
PK.node_list_helper=new function(){var a=function(a,c,d,e,f){var g=PKLE.node_list_const.COMMON_KEY_VALUES["${li}"];a&&c&&(PKLE.node_list_const.CUSTOM_CHILD_NODE_TYPES[a][c]||(c="common"),g='<li class="'+a+"-"+c+'-li">');d&&(g=d+g);a=PKLE.node_list_const.COMMON_KEY_VALUES["${/li}"];e&&(a+=e);return{"${li}":g,"${/li}":a,"${new}":f?f:""}};this.render_with_ph=function(a,c){return PK.data_node_helper.fill_placeholders(a,void 0,c)};this.get_key_values=function(b,c,d,e,f){if(!PKLE.Settings.use_own_tags())return PKLE.node_list_const.COMMON_KEY_VALUES;
if(!b||!PKLE.node_list_const.CUSTOM_CHILD_NODE_TYPES[b])return a(void 0,void 0,d,e,f);if(!c)return a(b,"empty",d,e,f);if(!c.children||c.children.length<1)return a(b,"common",d,e,f);return a(b,c.children[0].type,d,e,f)}};
PK.data_tree_node_processor_makers.list=function(a,b){var c="node-"+a.name,d=a.min_children_num?a.min_children_num:0,e,f;typeof a.child_types[0]=="string"?e=a.child_types[0]:(assert(typeof a.child_types[0]=="object","item of general_params.child_types must be a string or an object"),e=a.child_types[0].type,f=a.child_types[0].in_scope);var g=void 0,h={},i=function(a,c){var d=a.join()+":"+c,b=h[d];if(b)return b;b=[];PK.data_tree_processor.get_name(b,e,a);b=PK.fill_placeholders(c,[b[0]]);return h[d]=
b},j=function(a,c,d,b,g){return function(f){f||(f=g);assert(f,"anchor id must be provided");var h=function(a){a||(a=PK.data_node_helper.make_node(),PK.data_tree_processor.create(a,e,c));PK.data_tree_controller.add_node(d,a,b)},i={};PK.data_tree_processor.get_creation_menu(i,e,c,h,!1);i.delegated?(assert(i.delegated.submenu_maker,"get_creation_menu must delegate submenu_maker!"),h=i.delegated.submenu_maker(a),PK.LEWidgets.show_choice_editor(h.menu,f)):h()}},l=function(a,c,d,b){if(!PKLE.Settings.must_render_controls()||
!PKLE.Settings.render_new_item_placeholders_in_list())return!1;a=PK.data_tree_rendering.make_handler(j(i(a,g.text_insert_item),a,c,d));return PK.LEWidgets.make_container(void 0,void 0,void 0,"list-item-placeholder",!0,b,a)},n=new function(){var a=function(a,c,d,b){PKLE.Settings.must_render_controls()&&d.push(PK.LEWidgets.make_button(void 0,"button-delete",i(b,g.text_delete_item),PK.data_tree_rendering.make_handler(function(){PK.data_tree_controller.delete_node(c)}),{check_parent:!0}))},c=function(a,
c,d,b,e){PKLE.Settings.must_render_controls()&&d.push(PK.LEWidgets.make_button(void 0,g.icon_up,i(b,g.text_move_child_up),PK.data_tree_rendering.make_handler(function(){PK.data_tree_controller.reorder_child_nodes(a,c,!0)}),{check_parent:!0},e))},b=function(a,c,d,b,e){PKLE.Settings.must_render_controls()&&d.push(PK.LEWidgets.make_button(void 0,g.icon_down,i(b,g.text_move_child_down),PK.data_tree_rendering.make_handler(function(){PK.data_tree_controller.reorder_child_nodes(a,c,!1)}),{check_parent:!0},
e))},e=function(a,c,d,b){PKLE.Settings.must_render_controls()&&(d.push(PK.LEWidgets.make_button(void 0,"button-copy",i(b,g.text_copy_item),PK.data_tree_rendering.make_handler(function(){Ext.Msg.alert("TODO","Implement 'copy' of list item.")}),{check_parent:!0},void 0,!0)),d.push(PK.LEWidgets.make_button(void 0,"button-paste",i(b,g.text_paste_item),PK.data_tree_rendering.make_handler(function(){Ext.Msg.alert("TODO","Implement 'paste' of list item.")}),{check_parent:!0},void 0,!0)))};this.render=function(f,
h,i,j,k,l,m,n,o,r,q,A,B){var j=[],E,F;B&&k!=l&&r!=2&&(k?F=B:l&&(E=B));PKLE.Settings.copy_paste_in_context_menu()&&e(h,i,j,f);r>d&&a(h,i,j,f);k||c(h,i,j,f,E);A&&(j=j.concat(m));l||b(h,i,j,f,F);A||(j=j.concat(m));j=PK.LEWidgets.make_container(void 0,j,PK.data_node_helper.widget_container_type.LIST_ITEM);return!k&&g.glue?(assert(q),PK.node_list_helper.render_with_ph(g.glue,q).concat(j)):j}},m=new function(){var a=function(a,c,d,b,f,h,k,l){var m=[],p;if(PKLE.Settings.advanced_menu_colorization()){var n=
{};PK.data_tree_processor.get_menu_class(n,e,a);if(n.menu_class)p=n.menu_class}n=PK.browser_dom.generated_id();if(f)for(var o=0;o<f.length;o++)m.push({iconCls:"button-open-change-list-item-menu",text:f[o].menu_item_text,submenu_maker:f[o].submenu_maker});m.push("-");h&&m.push({iconCls:"button-delete",text:i(a,g.text_delete_item),value:function(){PK.data_tree_controller.delete_node(d)}});m.push({iconCls:"button-left",text:i(a,g.text_insert_item_before),value:j(i(a,g.text_insert_item_before),a,c,b,
n)});m.push({iconCls:"button-right",text:i(a,g.text_insert_item_after),value:j(i(a,g.text_insert_item_after),a,c,b+1,n)});k&&m.push({iconCls:g.icon_up,text:i(a,g.text_move_child_up),value:function(){PK.data_tree_controller.reorder_child_nodes(c,d,!0)}});l&&m.push({iconCls:g.icon_down,text:i(a,g.text_move_child_down),value:function(){PK.data_tree_controller.reorder_child_nodes(c,d,!1)}});PKLE.Settings.copy_paste_in_context_menu()&&(m.push({iconCls:"button-copy",text:i(a,g.text_copy_item),disabled:!0,
value:function(){Ext.Msg.alert("TODO","Implement 'copy' of list item.")}}),m.push({iconCls:"button-paste",text:i(a,g.text_paste_item),disabled:!0,value:function(){Ext.Msg.alert("TODO","Implement 'paste' of list item.")}}));if(m.length!=0)return b=PK.data_tree_rendering.make_handler(PK.LEWidgets.make_choice_editor(!1,!1,p,m,!1,function(a){a()},!1)),f=PKLE.Settings.universal_C_button()?"&nbsp;":"C",PK.LEWidgets.make_button(f,void 0,i(a,g.text_change_item),b,{check_parent:!0},void 0,void 0,n)};this.render=
function(c,b,e,f,h,i,j,k,m,l,n){var o;PKLE.Settings.must_render_controls()&&(o=a(c,b,e,f,k,l>d,!h,!i));c=void 0;c=o?m&&g.simple_value_render_template?PK.data_node_helper.fill_placeholders(g.simple_value_render_template,[j],{"${MENU}":o}):o.concat(j):j;c=PK.LEWidgets.make_container(void 0,c,PK.data_node_helper.widget_container_type.LIST_ITEM);return!h&&g.glue?(assert(n),PK.node_list_helper.render_with_ph(g.glue,n).concat(c)):c}},k;k=f?function(){return new function(){this.reset=function(){};this.get=
function(){return f}}}:function(){};var o=k(),r=k(),q=k();return Object({create:function(a,c){o&&o.reset();if(d>0){var b=void 0;o&&(b=o.get(),c.push(b));a.children=[];for(var g=0;g<d;g++){var f=PK.data_node_helper.make_node();PK.data_tree_processor.create(f,e,c);a.children.push(f)}b&&c.pop()}},init_node:function(){if(!g){var c=b.glue.match("<li>")||b.glue.match(/\x24{li}/g),d=function(a){if(a)return PK.split_using_placeholders(a,PKLE.node_list_const.COMMON_KEYS)},e=function(a){if(a)return a.match(/\x24{new}/g)||
(a+="${new}"),PK.split_using_placeholders(a,PKLE.node_list_const.COMMON_KEYS)};g=PK.override_object_properties(void 0,{title:!0,description:{default_value:void 0},"class":{default_value:void 0},line_by_line_layout:{default_value:c},simple_value_render_template:{default_value:!0},glue:d,empty:e,before:d,after:e,icon_up:{default_value:c?"button-up":"button-left"},icon_down:{default_value:c?"button-down":"button-right"},text_add_item:{default_value:PK.i18n.raw_text("Add new item")},text_insert_item:{default_value:PK.i18n.raw_text("Insert new item")},
text_insert_item_before:{default_value:PK.i18n.raw_text("Insert new item before")},text_insert_item_after:{default_value:PK.i18n.raw_text("Insert new item after")},text_change_item:{default_value:PK.i18n.raw_text("Change item")},text_delete_item:{default_value:PK.i18n.raw_text("Delete item")},text_move_child_up:{default_value:PK.i18n.raw_text("Exchange item with previous")},text_move_child_down:{default_value:PK.i18n.raw_text("Exchange item with next")},text_copy_item:{default_value:PK.i18n.raw_text("Copy item to clipboard")},
text_paste_item:{default_value:PK.i18n.raw_text("Paste from clipboard to item")}},b);g.description&&g.description!=""&&(g.tooltip_block=PK.data_node_helper.make_tooltip_block(g.description,!0));g.simple_value_render_template=PK.data_node_helper.make_simple_value_render_template(g.simple_value_render_template);b=a=void 0}},get_name:function(){g||this.init_node();if(g.title!==void 0)return g.title;assert("No title for "+c);return I18N("list")},for_each:new function(){this.down=function(){if(q)return q.reset(),
{child_scope_provider:q}};this.up=function(){}},validate:new function(){this.down=function(a){if(a&&a.children)for(var c=0;c<a.children.length;c++)if(a.children[c]===null||a.children[c]===void 0)return{invalid:!0,description:g.title+"["+(c+1)+"]: "+I18N("List child has invalid type")+": "+typeof a.children[c]}};this.up=function(){}},render:new function(){this.down=function(){r&&r.reset();return{accept_delegated_menu_items:!0,child_scope_provider:r}};this.up=function(a,d,b,e,f,h){d=PK.data_node_helper.clone_scopes(a);
if(o){o.reset();var k=o.get();d.push(k)}var k=PKLE.Settings.use_menu_item_delegating()?m:n,r=PK.data_node_id.make_node_id(h),q=[],u=[];if(PKLE.Settings.must_render_controls()){var v=i(d,g.text_add_item);u.push(PK.LEWidgets.make_button(void 0,"button-add",v,PK.data_tree_rendering.make_handler(j(v,d,r)),{check_parent:!0}))}if(b.length==0)q=g.empty?q.concat(PK.node_list_helper.render_with_ph(g.empty,PK.node_list_helper.get_key_values(h.type,void 0,!1,!1,u))):q.concat(u);else{if(g.before){v=void 0;if(g.tooltip_block)v=
g.tooltip_block.tags,PK.data_tree_rendering.add_tooltip(g.tooltip_block.id,g.tooltip_block.text,{dismissDelay:PKLE.INFINITE_PERIOD_MS});var z=PK.node_list_helper.get_key_values(h.type,h.children[0],l(d,r,0,i(d,g.text_insert_item)));if(v)for(var t in v)z[t]=v[t];q=q.concat(PK.node_list_helper.render_with_ph(g.before,z))}for(t=0;t<b.length;t++)var v=b[t],z=e[t],G=f&&f.length>0&&f[t],H=PK.data_node_id.make_node_id(h.children[t]),A=PK.node_list_helper.get_key_values(h.type,h.children[t],l(d,r,t,i(d,g.text_insert_item))),
q=q.concat(k.render(d,r,H,t,t==0,t==b.length-1,v,z,G,b.length,A,!g.line_by_line_layout,g.line_by_line_layout?' style = "margin-right: 13px;"':!1));q=g.after?q.concat(PK.node_list_helper.render_with_ph(g.after,PK.node_list_helper.get_key_values(h.type,h.children[b.length-1],!1,l(d,r,!1,i(d,g.text_insert_item)),u))):q.concat(u)}PKLE.Settings.use_own_tags()||(q=q.concat(u));return{rendered:PK.LEWidgets.make_container(r,q,PK.data_node_helper.widget_container_type.LIST,PKLE.Settings.use_own_tags()?PK.data_node_helper.generate_css_class_name(c,
g["class"],a):void 0)}}}})};PK.data_tree_node_processor_makers.literal=function(a,b){var c=void 0;return Object({create:function(){},init_node:function(){if(!c)c=PK.override_object_properties(void 0,{title:{default_value:void 0},description:{default_value:void 0},common:function(a){a||(a="");return PK.split_using_placeholders(a,PK.data_node_helper.tooltip_keys)}},b),c.description&&c.description!=""&&(c.tooltip_block=PK.data_node_helper.make_tooltip_block(c.description,!0)),b=void 0},get_name:function(){c||this.init_node();if(c.title!==
void 0)return c.title;return I18N("literal")},render:new function(){this.up=function(){var a=void 0;c.tooltip_block?(PK.data_tree_rendering.add_tooltip(c.tooltip_block.id,c.tooltip_block.text,{dismissDelay:PKLE.INFINITE_PERIOD_MS}),a=PK.data_node_helper.fill_placeholders(c.common,void 0,c.tooltip_block.tags)):a=c.common;return{rendered:PK.LEWidgets.make_label(a),contains_value_only:!0}}}})};PK.data_tree_node_processor_makers.record=function(a,b){var c=a.name,d="node-"+a.name,e=a.child_types,f=e.length,g=void 0,h=function(){return new function(){var a,c;this.reset=function(d){a=0;if(d&&d.children&&d.children.length>f){c=[];for(var b=f;b<d.children.length;b++)if(d.children[b]!=void 0&&d.children[b]!=null){var e=g.optional_params[b-f];typeof e=="object"&&e.in_scope?c.push(e.in_scope):c.push(void 0)}}};this.get=function(){if(a>=f){if(c&&c.length>0)return c.shift()}else{var d=e[a];a++;if(typeof d==
"object")return d.in_scope}}}},i=h(),j=h(),l=h(),n=h();return Object({create:function(a,c,d){i&&i.reset(void 0);if(f>0){a.children=[];for(var b=0;b<f;b++){var g=void 0;i&&(g=i.get());var h;if(d&&d[b])h=d[b];else{h=e[b];var j;typeof h=="string"?j=h:(assert(typeof h=="object","node_props must be a string or an object"),j=h.type);h=PK.data_node_helper.make_node();g&&c.push(g);PK.data_tree_processor.create(h,j,c);g&&c.pop()}a.children.push(h)}}},init_node:function(){if(!g){g=PK.override_object_properties(void 0,
{title:!0,description:{default_value:void 0},"class":{default_value:void 0},common:function(a){a||(a="${1}");return PK.split_using_placeholders(a,PK.data_node_helper.tooltip_keys)},contains_value_only:{default_value:!1},delegate_creation_menu:{default_value:!1},text_expand_optional:{default_value:I18N("Add another optional parameter")},text_delete_optional:{default_value:I18N("Delete this optional parameter")}},b);g.description&&g.description!=""&&(g.tooltip_block=PK.data_node_helper.make_tooltip_block(g.description,
!0));if(b.delegated_mandatory_children)for(var c in g.delegated_mandatory_child_names={},b.delegated_mandatory_children)g.delegated_mandatory_child_names[c]=b.delegated_mandatory_children[c];g.optional_params=[];if(b.optional)for(c=0;c<a.optional.length;c++){var d=a.optional[c],e,f=void 0;typeof d=="string"?e=d:(assert(typeof d=="object","node_props must be a string or an object"),e=d.type,f=d.in_scope);g.optional_params.push({type:e,in_scope:f,menu_item:b.optional[c].menu_item,description:b.optional[c].description,
render_template:PK.split_using_placeholders(b.optional[c].render_template)})}b=a=void 0}},get_name:function(){g||this.init_node();if(g.title!==void 0)return g.title;assert("No title for "+d);return I18N("record")},get_creation_menu:function(a,d){if(g.delegate_creation_menu&&(a&&(a=PK.data_node_helper.clone_scopes(a)),n&&n.reset(void 0),f!=0))for(var b=function(b){return function(e){assert(e,"child_node required by this_node_maker()");var g=[];g[b]=e;e=PK.data_node_helper.make_node();PK.data_tree_processor.create(e,
c,a,g);d(e)}},h=0;h<f;h++){var i=void 0;n&&(i=n.get());var j=e[h];if(typeof j!="string")assert(typeof j=="object","node_props must be a string or an object"),j=j.type;var l={};i&&a.push(i);PK.data_tree_processor.get_creation_menu(l,j,a,b(h));i&&a.pop();if(l.delegated)return b=l.delegated,b.submenu_caption=g.delegated_mandatory_child_names[h+1],b}},for_each:new function(){this.down=function(a){if(l)return l.reset(a),{child_scope_provider:l}};this.up=function(){}},render:new function(){this.down=function(a){var c=
!1;g.delegated_mandatory_child_names&&(c=new function(){var a;this.reset=function(){a=0};this.check=function(){a++;if(a>f)return!1;return g.delegated_mandatory_child_names[a]!==void 0}});j&&j.reset(a);return{accept_delegated_menu_items:c,child_scope_provider:j}};var a=function(a,c,d){if(PKLE.Settings.must_render_controls()&&d.length!=0){var b=PK.data_node_helper.clone_scopes(a),a=PK.data_tree_rendering.make_handler(PK.LEWidgets.make_choice_editor(!1,!1,void 0,d,!1,function(a){g.optional_params[a].in_scope&&
b.push(g.optional_params[a].in_scope);var d=PK.data_node_helper.make_node();PK.data_tree_processor.create(d,g.optional_params[a].type,b);PK.data_tree_controller.replace_node_with_index(c,f+a,d)}));return PK.LEWidgets.make_button(void 0,"button-expand",I18N(g.text_expand_optional),a,{check_parent:!0})}},c=function(a,c,d,b,e){var h=[],i=!1;if((!a||!PKLE.Settings.use_menu_item_delegating())&&PKLE.Settings.must_render_controls())h.push(PK.LEWidgets.make_button(void 0,"button-delete",I18N(g.text_delete_optional),
PK.data_tree_rendering.make_handler(function(){PK.data_tree_controller.replace_node_with_index(c,f+d,void 0)}),!0)),i=!0;h=h.concat(PK.data_node_helper.fill_placeholders(b,[e]));return i?PK.LEWidgets.make_container(void 0,h,PK.data_node_helper.widget_container_type.OPTIONAL_RECORD_ELEMENT):h};this.up=function(b,e,h,i,j,l){var n=PK.data_node_id.make_node_id(l),s=h.splice(0,f),j=[],x=void 0;if(g.tooltip_block)x=g.tooltip_block.tags,PK.data_tree_rendering.add_tooltip(g.tooltip_block.id,g.tooltip_block.text,
{dismissDelay:PKLE.INFINITE_PERIOD_MS});for(var j=j.concat(PK.data_node_helper.fill_placeholders(g.common,s,x)),x=[],D=0,y=[],s=0;s<g.optional_params.length;s++){var C=!1;l.children&&l.children[f+s]!==void 0&&l.children[f+s]!==null?(C=!0,j=j.concat(c(e,n,s,g.optional_params[s].render_template,h[D])),D++):x.push({value:s,text:g.optional_params[s].menu_item,description:g.optional_params[s].description});y.push({value:s,text:g.optional_params[s].menu_item,description:g.optional_params[s].description,
checkbox:{state:C}})}h=[];if(e){if(i){var s=0,u;for(u in g.delegated_mandatory_child_names){assert(i[s],"No menu item delegated by mandatory child");for(e=0;e<i[s].length;e++){if(g.delegated_mandatory_child_names[u].length>0&&typeof g.delegated_mandatory_child_names[u]=="string")i[s][e].delegate_to_top_level=!1,i[s][e].submenu_caption=g.delegated_mandatory_child_names[u],i[s][e].name=g.delegated_mandatory_child_names[u];h.push(i[s][e])}s++}}if(y.length>0){var v=PK.data_node_helper.clone_scopes(b);
h.push({menu_item_text:I18N("Set/clear optional parameters"),delegate_to_top_level:!0,submenu_maker:function(a,c){return PK.LEWidgets.make_menu(c,!1,a,void 0,y,!1,function(a){g.optional_params[a].in_scope&&v.push(g.optional_params[a].in_scope);if(y[a].checkbox.state)PK.data_tree_controller.replace_node_with_index(n,f+a,void 0);else{var c=PK.data_node_helper.make_node();PK.data_tree_processor.create(c,g.optional_params[a].type,v);PK.data_tree_controller.replace_node_with_index(n,f+a,c)}})}})}}else(i=
a(b,n,x))&&j.push(i);return{rendered:PK.LEWidgets.make_container(n,j,PK.data_node_helper.widget_container_type.RECORD,PKLE.Settings.use_own_tags()?PK.data_node_helper.generate_css_class_name(d,g["class"],b):void 0),delegated_menu_items:h,contains_value_only:g.contains_value_only}}}})};PK.data_tree_node_processor_makers.value=function(a,b){var c=a.name,d="node-"+a.name,e=a.data_type,f=e=="large_text"?void 0:80,g=void 0;return Object({create:function(a,d){var b;d.unshift(PK.data_node_helper.DEFAULT_SCOPE);for(var e=d.length-1;e>=0;e--)if(b=PKLE.default_value_generators.get(c,d[e]))break;d.shift();a.children=b?[b()]:[g.default_value]},init_node:function(){g||(g=PK.override_object_properties({default_value:a["default"]},{title:{default_value:I18N("value")},"class":{default_value:void 0},
common:function(a){a||(a="${1}");return PK.split_using_placeholders(a)}},b),b=a=void 0)},get_name:function(){g||this.init_node();if(g.title!==void 0)return g.title;assert("No title for "+d);return I18N("value")},validate:new function(){this.down=function(a,d){var b=PK.data_validation.get_validator(e,c,d);if(b){var f=a&&a.children&&a.children.length>0?a.children[0]:void 0;if(!b(f))return{invalid:!0,description:g.title+": "+I18N("Value is invalid")+": "+f}}};this.up=function(){}},render:new function(){this.up=
function(a,b,j,l,n,m){var k=PK.data_node_id.make_node_id(m),b=m.children[0];PKLE.Settings.must_render_controls()?(j=void 0,PKLE.Settings.use_own_tags()&&(j=PKLE.data_value_class.get(e,c,a,b)),l=e=="large_text",b=PK.LEWidgets.make_text_field(b,f,l,!0,j,PK.data_tree_rendering.make_handler(PK.LEWidgets.make_value_editor(b,function(a){PK.data_tree_controller.replace_node_with_index(k,0,a)},PK.data_validation.get_validator(e,c,a),l)))):b=PK.LEWidgets.make_label(PK.entityify_and_escape_quotes(b));j=void 0;
PKLE.Settings.use_own_tags()&&(j=PK.data_node_helper.generate_css_class_name(d,g["class"],a));return{rendered:PK.LEWidgets.make_container(k,PK.data_node_helper.fill_placeholders(g.common,b),PK.data_node_helper.widget_container_type.VALUE,j),contains_value_only:!0}}}})};PKLE.node_variant_helper=new function(){this.make_menu=function(a){for(var b=[],c=0;c<a.length;c++){var d=a[c];d.submenu?b.push({text:d.menu_item,description:d.description,submenu:PKLE.node_variant_helper.make_menu(d.submenu),submenu_caption:d.submenu_caption}):(assert(d.type,"menu item must be a submenu or must have value!"),b.push({render_template:d.render_template,value:d.type,text:d.menu_item,description:d.description}))}return b};this.get_item_by_type=function(a,b){if(a)if(b)for(var c=0;c<a.length;c++){var d=
a[c];if(d.value==b)return d;if(d.submenu&&(d=PKLE.node_variant_helper.get_item_by_type(d.submenu,b)))return d}else LOG("Type required for PKLE.node_variant_helper.get_item_by_type()!");else LOG("Menu required for PKLE.node_variant_helper.get_item_by_type()!")};this.expand_all_leaves=function(a,b,c){if(a)if(b)if(c)for(var d=0;d<a.length;d++){var e=a[d];if(e.value){var f={};PK.data_tree_processor.get_creation_menu(f,e.value,b,c);if(f.delegated)assert(f.delegated.submenu_maker,"get_creation_menu must delegate submenu_maker!"),
e.submenu_maker=f.delegated.submenu_maker,e.submenu=f.delegated.submenu,e.submenu_caption=f.delegated.submenu_caption}else e.submenu&&PKLE.node_variant_helper.expand_all_leaves(e.submenu,b,c)}else CRITICAL_ERROR("parent_node_maker required for PKLE.node_variant_helper.expand_all_leaves()!");else CRITICAL_ERROR("scopes required for PKLE.node_variant_helper.expand_all_leaves()!");else CRITICAL_ERROR("menu required for PKLE.node_variant_helper.expand_all_leaves()!")};this.make_root_node_maker=function(a){return function(b){assert(b,
"child_node required by root_node_maker()");PK.data_tree_controller.replace_node_with_index(a,0,b)}};this.make_choice_editor_maker=function(a,b,c,d,e,f){c=PK.data_node_helper.clone_scopes(c);return function(g){var h=a.make_menu_with_delegated_items(c,f,d,PKLE.node_variant_helper.make_root_node_maker(b));if(e&&e.length>0)for(var h=[{text:a.make_text(c,a.get_text("text_change_item")),submenu:h}],i=0;i<e.length;i++)h.push({text:e[i].menu_item_text,submenu_maker:e[i].submenu_maker});PKLE.Settings.copy_paste_in_context_menu()&&
(h.push("-"),h.push({iconCls:"button-copy",text:a.make_text(c,a.get_text("text_copy_item")),disabled:!0,value:function(){Ext.Msg.alert("TODO","Implement 'copy' of variant.")}}),h.push({iconCls:"button-paste",text:a.make_text(c,a.get_text("text_paste_item")),disabled:!0,value:function(){Ext.Msg.alert("TODO","Implement 'paste' of variant.")}}));i=void 0;PKLE.Settings.advanced_menu_colorization()&&(i=a.get_menu_class(c));PK.LEWidgets.make_choice_editor(f,a.make_text(c,a.get_menu_caption()),i,h,PKLE.menu_transformers.get(a.get_type_name(),
c),function(a){var d=PK.data_node_helper.make_node();PK.data_tree_processor.create(d,a,c);PK.data_tree_controller.replace_node_with_index(b,0,d)})(g)}}};
PK.data_tree_node_processor_makers.variant=function(a,b){var c=a.name,d="node-"+a.name,e;if(a.init)e=a.init;else{for(var f=b.scopes[PK.data_node_helper.DEFAULT_SCOPE][0];f.submenu;)f=f.submenu[0];e=f.type}assert(e!==void 0,"undefined default variant");var g=void 0,h=new function(){this.get_type_name=function(){return c};this.get_menu_caption=function(){return g.text_menu_caption};this.get_text=function(a){return g[a]};this.get_menu_class=function(a){a||(a=[]);return PK.data_node_helper.get_scoped_value(g.menu_class,
a,!0)};var a={};this.make_text=function(c,d){var b=c.join()+":"+d,e=a[b];if(e)return e;e=PK.data_node_helper.get_scoped_value(g.element_name,c,!0);e=PK.fill_placeholders(d,[e]);return a[b]=e};this.get_default_variant=function(a){a=PK.data_node_helper.get_scoped_value(e,a,!0);assert(a!==void 0,"Undefined default variant");return a};this.get_menu_render_template=function(a){for(var c in g.menu_by_scope)for(var d=0;d<g.menu_by_scope[c].length;d++)if(g.menu_by_scope[c][d].value==a)return g.menu_by_scope[c][d].render_template;
return PK.data_node_helper.DEFAULT_RENDER_TEMPLATE};this.make_own_menu=function(a,c){var d=PK.clone(g.menu_by_scope[PK.data_node_helper.DEFAULT_SCOPE]);if(a&&(a.length>1||a.length==1&&a[0]!=PK.data_node_helper.DEFAULT_SCOPE))for(var b={},e=0;e<a.length;e++)if(a[e]!=PK.data_node_helper.DEFAULT_SCOPE&&!b[a[e]]&&(b[a[e]]=!0,g.menu_by_scope[a[e]]))for(var f=g.menu_by_scope[a[e]],h=0;h<f.length;h++){for(var i=!1,p=0;p<d.length;p++)if(assert(d[p].text,"Menu item has no text!"),d[p].text==f[h].text)if(d[p].submenu){assert(f[h].submenu,
"Additional menu item has no submenu: ");d[p].submenu=d[p].submenu.concat(PK.clone(f[h].submenu));i=!0;break}else CRITICAL_ERROR("Same menu item name, but no submenu: ");i||d.push(PK.clone(f[h]))}PKLE.node_variant_helper.expand_all_leaves(d,a,c);return d};this.make_menu_with_delegated_items=function(a,c,d,b){a=this.make_own_menu(a,b);if(!d||d.length==0||d[0].length==0)return a;if(c=PKLE.node_variant_helper.get_item_by_type(a,c))if(d=d[0],d.length==0)CRITICAL_ERROR("No menu items delegated by first child");
else if(d.length==1)c.submenu_maker=d[0].submenu_maker,c.submenu_caption=d[0].submenu_caption;else{for(var b=[],e=0;e<d.length;e++)b.push({submenu_maker:d[e].submenu_maker,text:d[e].menu_item_text,submenu_caption:d[e].submenu_caption});c.submenu=b}return a}};return Object({create:function(a,c,d){d||(d=PK.data_node_helper.make_node(),PK.data_tree_processor.create(d,h.get_default_variant(c),c));a.children=[d]},init_node:function(){if(!g){g=PK.override_object_properties(void 0,{title:!0,"class":{default_value:void 0},
menu_class:{default_value:void 0},element_name:{default_value:void 0},render_choice_control_always:{default_value:!1},delegate_creation_menu:{default_value:!1},simple_value_render_template:{default_value:PK.data_node_helper.DEFAULT_SIMPLE_VALUE_RENDER_TEMPLATE},label:{default_value:void 0},icon:{default_value:void 0},text_change_item:{default_value:PK.i18n.raw_text("Change item")},text_menu_caption:{default_value:PK.i18n.raw_text("Change item")},text_copy_item:{default_value:PK.i18n.raw_text("Copy item to clipboard")},
text_paste_item:{default_value:PK.i18n.raw_text("Paste from clipboard to item")}},b);g.simple_value_render_template=PK.data_node_helper.make_simple_value_render_template(g.simple_value_render_template);if(!g.element_name)g.element_name=g.title;g.menu_by_scope={};assert(b&&b.scopes!==void 0&&b.scopes[PK.data_node_helper.DEFAULT_SCOPE]!==void 0,"no default scope in render params");for(var c in b.scopes)g.menu_by_scope[c]=PKLE.node_variant_helper.make_menu(b.scopes[c]);b=a=void 0}},get_creation_menu:function(a,
d,b){if((!b||g.delegate_creation_menu)&&PKLE.Settings.use_creation_menu_delegating())return a=PK.data_node_helper.clone_scopes(a),{submenu_maker:function(b,e){var f=function(a){assert(a,"child_node required by this_node_maker()");var b=PK.data_node_helper.make_node();PK.data_tree_processor.create(b,c,void 0,a);d(b)},g=h.make_own_menu(a,f),l=h.get_menu_class(a);return PK.LEWidgets.make_menu(e,!1,b,l,g,PKLE.menu_transformers.get(c,a),function(c){var d=PK.data_node_helper.make_node();PK.data_tree_processor.create(d,
c,a);f(d)})}}},get_name:function(a){g||this.init_node();a||(a=[]);return PK.data_node_helper.get_scoped_value(g.element_name,a,!0)},get_menu_class:function(a){g||this.init_node();return h.get_menu_class(a)},render:new function(){var a=function(a,c,d,b){if(!PKLE.Settings.must_render_controls())return"";var e;b&&b.length>0&&(e=PK.data_node_helper.extract_top_level_delegates(b[0]));c=PK.data_tree_rendering.make_handler(PKLE.node_variant_helper.make_choice_editor_maker(h,c,a,b,e,d));d=PKLE.Settings.universal_C_button()?
"&nbsp;":g.label;return PK.LEWidgets.make_button(d,g.icon,h.make_text(a,g.text_change_item),c,!0)};this.down=function(){return{accept_delegated_menu_items:!0}};this.up=function(b,e,f,m,k,o){var k=k&&k.length>0&&k[0],r=PK.data_node_id.make_node_id(o),q=[],p=void 0;if(o.children&&o.children.length>0)p=o.children[0].type;o=void 0;if(e){var w;m&&m.length>0&&(w=PK.data_node_helper.extract_top_level_delegates(m[0]));b=PK.data_node_helper.clone_scopes(b);o=[{menu_item_text:h.make_text(b,g.text_change_item),
delegate_to_top_level:!1,submenu_maker:function(a,d){var e=h.make_menu_with_delegated_items(b,p,m,PKLE.node_variant_helper.make_root_node_maker(r)),f=p,g=h.get_menu_class(b);return PK.LEWidgets.make_menu(d,f,a,g,e,PKLE.menu_transformers.get(c,b),function(a){var c=PK.data_node_helper.make_node();PK.data_tree_processor.create(c,a,b);PK.data_tree_controller.replace_node_with_index(r,0,c)})}}];w&&(o=o.concat(w))}e=void 0;w=PK.split_using_placeholders(h.get_menu_render_template(p),["MENU"]);if(g.render_choice_control_always||
!o){e=a(b,r,p,m);if(k&&g.simple_value_render_template)w=g.simple_value_render_template;k=!1}f.length==0&&CRITICAL_ERROR("No children items for variant "+r);q=q.concat(PK.data_node_helper.fill_placeholders(w,f,{"${MENU}":e?e:""}));return{rendered:PK.LEWidgets.make_container(r,q,PK.data_node_helper.widget_container_type.VARIANT,PKLE.Settings.use_own_tags()?PK.data_node_helper.generate_css_class_name(d,g["class"],b):void 0),delegated_menu_items:o,contains_value_only:k}}}})};PK.data_tree_controller=new function(){var a,b,c;this.operation_type={ADD_NODE:1,DELETE_NODE:2,REPLACE_NODE:3,REPLACE_NODE_WITH_INDEX:4,REORDER_CHILD_NODES:5};this.init=function(d,e,f){a=d;b=e;c=f};this.add_node=function(d,e,f){assert(e.id,"No node id!");if(!b||b()){var g=PK.data_tree_processor.find(a,d);assert(g,"node not found: "+Ext.encode(d));d=g.node;d.children===void 0?d.children=[e]:f===void 0||f===!1?d.children.push(e):d.children.splice(f,0,e);c&&c(this.operation_type.ADD_NODE,d,e,f)}};this.delete_node=
function(d){if(!b||b()){var e=PK.data_tree_processor.find(a,d);assert(e,"node not found: "+Ext.encode(d));e.parent_node.children.splice(e.index,1);c&&c(this.operation_type.DELETE_NODE,e.parent_node,void 0,e.index)}};this.replace_node=function(d,e,f){assert(typeof(f=="string")||typeof f=="number"||f.id,"No node id!");if(!b||b())d=PK.data_tree_processor.find(a,e),assert(d,"node not found: "+Ext.encode(e)),d.parent_node.children[d.index]=f,c&&c(this.operation_type.REPLACE_NODE,d.parent_node,f,d.index)};
this.replace_node_with_index=function(d,e,f){assert(typeof(f=="string")||typeof f=="number"||f.id,"No node id!");if(!b||b()){var g=PK.data_tree_processor.find(a,d);assert(g,"node not found: "+Ext.encode(d));d=g.node.children;if(d==void 0)g.node.children=[],d=g.node.children;d[e]=f;c&&c(this.operation_type.REPLACE_NODE_WITH_INDEX,g.node,f,e)}};this.reorder_child_nodes=function(d,e,f){if(!b||b()){d=PK.data_tree_processor.find(a,e);assert(d,"node not found: "+Ext.encode(e));e=d.index;f=f?d.index-1:d.index+
1;assert(f>=0&&f<d.parent_node.children.length,"invalid exchange parameters");var g=d.parent_node.children[e];d.parent_node.children[e]=d.parent_node.children[f];d.parent_node.children[f]=g;c&&c(this.operation_type.REORDER_CHILD_NODES,d.parent_node,void 0,e,f)}}};PK.data_tree_operations.create=function(a,b,c,d,e){assert(a.id,"PK.data_tree_operations.create(): root doesn't have id!");a.type=c;assert(PK.node_schema[c],"No type: "+Ext.encode(c));PK.node_schema[c].handler.create(a,d,e);PK.node_schema[c].handler.validate&&(a=PK.node_schema[c].handler.validate.down(a,d))&&a.invalid&&CRITICAL_ERROR("Created invalid object of type '"+c+"'! "+a.description);return!1};PK.data_tree_visitor_makers.determine_problematic_node=function(a,b){return new function(){var c;a&&a.length>0&&(c=a[0]);var d=void 0,e={};this.result=function(){if(d){var a=d,c=PK.data_node_id.make_node_id(a);if(e[c]){for(var b=0;b<1E9;b++){if(!e[c]||e[c].length!=1)return a;a=e[c][0];c=PK.data_node_id.make_node_id(a)}CRITICAL_ERROR("Too long chain of affected nodes!")}}};this.visit_root=function(a){if(!c||!b)return CRITICAL_ERROR("Invalid parameters for determine_problematic_node()!"),!1;d=a;return!0};
this.visit_node=function(a,d,h,i){a=PK.data_node_id.make_node_id(d);assert(a,"Invalid node");h=b[a];assert(h,"No line number table record for node "+a);h.first<=c&&c<=h.last&&i&&(i=PK.data_node_id.make_node_id(i),assert(i,"Invalid parent node"),e[i]?e[i].push(d):e[i]=[d]);return!0}}};PK.data_tree_visitor_makers.find=function(a){return new function(){var b,c=!1,d=!1,e=!1;this.result=function(){if(b)return{node:b,parent_node:c,index:d,path:e}};this.visit_root=function(c){if(PK.data_node_id.make_node_id(c)==a)return b=c,!1;return!0};this.visit_node=function(f,g,h,i,j,l){if(PK.data_node_id.make_node_id(g)==a){b=g;c=i;d=j;if(l){e=[];for(f=0;f<l.length;f++)e.push({index:l[f].current_child_index,node:l[f].node})}return!1}return!0}}};PK.data_tree_operations.for_each=function(a,b,c){return new function(){if(c.visit_root(a)){var d={node:void 0,current_child_index:0,child_scope_provider:void 0,extended_scope:!1},b=[PK.clone(d)],f=[],g={},h=!0;this.finish=function(){return c.result()};this.down_wrapper=function(a,j,l){if(!h)return PKLE.data_tree.BREAK;var n,m=b.length-1,j=b[m].current_child_index++;n=b[m].node;var k;b[m].child_scope_provider&&(k=b[m].child_scope_provider.get());if(k)f.push(k),g[k]===void 0&&(g[k]=0),g[k]++,b[m].extended_scope=
!0;var o;k=PK.clone(d);k.node=l;if(a&&(o=a(l,f)))k.child_scope_provider=o.child_scope_provider;k.child_scope_provider&&typeof k.child_scope_provider=="object"&&k.child_scope_provider.reset();b.push(k);h=c.visit_node(o,l,g,n,j,b)};this.up_wrapper=function(){b.pop();if(b[b.length-1].extended_scope){var a=f.pop();--g[a]<=0&&(g[a]=void 0)}}}else this.finish=function(){return c.result()}}};PK.data_tree_operations.get_creation_menu=function(a,b,c,d,e,f){assert(e,"PK.data_tree_operations.get_creation_menu(): parent_node_maker must be supplied!");f===void 0&&(f=!0);if(PK.node_schema[c].handler.get_creation_menu)a.delegated=PK.node_schema[c].handler.get_creation_menu(d,e,f);return!1};PK.data_tree_operations.get_menu_class=function(a,b,c,d){if(PK.node_schema[c].handler.get_menu_class)a.menu_class=PK.node_schema[c].handler.get_menu_class(d);return!1};PK.data_tree_operations.get_name=function(a,b,c,d){a[0]===void 0&&a.push("");a[0]+=PK.node_schema[c].handler.get_name(d);return!1};PK.data_tree_visitor_makers.validate=function(){return new function(){var a;this.result=function(){return a};this.visit_root=function(){return!0};this.visit_node=function(b,c){c&&!c.id&&(a||(a=[]),a.push("No node id for: "+Ext.encode(c)));b&&b.invalid&&(a||(a=[]),a.push(b.description));return!0}}};PK.data_tree_processor=new function(){var a={},b=function(c,b){assert(a[c]===void 0,"duplicate operation");a[c]={handler_maker:b}};this.register_node_processor=function(c,b){for(var f in b){var g=a[f];assert(g!==void 0,"invalid operation name");if(g.tag_handlers===void 0)g.tag_handlers={};assert(g.tag_handlers[c]===void 0,"duplicate node registration");g.tag_handlers[c]=b[f]}};var c=function(c){return function(b,f,g,h,i){var j=Object({up:{},down:{}});if(f=a[c].handler_maker(b,j,f,g,h,i)){if(f.finish&&
f.finish()!==void 0)return f.finish();var g=a[c].tag_handlers,l;for(l in g)j.down[l]=g[l].down,j.up[l]=g[l].up;PKLE.data_tree.walk(b,j,"type",f.down_wrapper,f.up_wrapper);if(f.finish)return f.finish(j)}}};this.init=function(){a={};for(var d in PK.data_tree_operations)b(d,PK.data_tree_operations[d]);for(var e in PK.data_tree_visitor_makers)(function(a){b(a,function(c,b,d,e,f,m){d=PK.data_tree_visitor_makers[a](d,e,f,m);return PK.data_tree_operations.for_each(c,b,d)})})(e);b("init_node",function(){return!0});
for(var f in PK.node_schema)PK.data_tree_processor.register_node_processor(f,PK.node_schema[f].handler);for(d in a)this[d]=c(d);for(f in PK.node_schema)PK.node_schema[f].handler.init_node&&PK.node_schema[f].handler.init_node()};LOG("Inited data tree processor")};PK.data_tree_operations.render=function(a,b,c,d){return new function(){var a=!1,b=!1,g={accept_delegated_menu_items:!1,child_scope_provider:void 0,extended_scope:!1},h=function(){return{rendered:[],menu_items_delegated_by_children:[],child_contains_value_only:[]}},i=h(),j=[i],l=[PK.clone(g)],n=[];PK.data_tree_rendering.reset_handlers();this.finish=function(){PK.LEWidgets.helper.fill_panel_data(i.rendered,c);c.tooltips=PK.data_tree_rendering.give_tooltips();c.handlers=PK.data_tree_rendering.give_handlers();
a&&d&&!b&&LOG("Warning: Problematic node "+PK.data_node_id.make_node_id(d)+" was not iterated in rendering!")};this.down_wrapper=function(c,b,d){a=!0;var b=l.length-1,f;l[b].child_scope_provider&&(f=l[b].child_scope_provider.get());f?(n.push(f),l[b].extended_scope=!0):l[b].extended_scope=!1;j.push(h());f=PK.clone(g);if(c&&(c=c(d)))f=c,PKLE.Settings.use_menu_item_delegating()?typeof f.accept_delegated_menu_items=="object"&&f.accept_delegated_menu_items.reset():f.accept_delegated_menu_items=!1,typeof f.child_scope_provider==
"object"&&f.child_scope_provider.reset();l.push(f)};this.up_wrapper=function(a,c,e){var g=j.pop();l.pop();if(a){assert(j.length==l.length,"Data stack sizes don't match!");var c=j.length-1,h=l[c].accept_delegated_menu_items;typeof h=="object"&&(h=h.check());a=a(n,h,g.rendered,g.menu_items_delegated_by_children,g.child_contains_value_only,e);if(d&&PK.data_node_id.make_node_id(d)==PK.data_node_id.make_node_id(e))b=!0,a&&a.rendered?a.rendered=PK.data_node_helper.wrap_problematic_node(a.rendered,d.description):
LOG("Warning: Problematic node "+PK.data_node_id.make_node_id(d)+" didn't generate output!");l[c].extended_scope&&(assert(n.length>0,"Trying to remove non-existing scope"),n.pop());a&&(j[c].child_contains_value_only.push(a.contains_value_only),a.rendered&&j[c].rendered.push(a.rendered),a.delegated_menu_items&&a.delegated_menu_items.length>0&&(assert(h,"Child has delegated items, but parent won't accept them!"),j[c].menu_items_delegated_by_children.push(a.delegated_menu_items)))}}}};
PK.data_tree_rendering=new function(){handlers_=void 0;this.reset_handlers=function(){handlers_=[]};this.get_handlers=function(){return handlers_};this.give_handlers=function(){var a=handlers_;this.reset_handlers();return a};this.set_handlers=function(a){this.reset_handlers();handlers_=a.slice()};this.make_handler=function(a){handlers_.push(a);return"PK.data_tree_rendering.get_handlers()["+(handlers_.length-1)+"]"};var a={};this.reset_tooltips=function(){a={}};this.give_tooltips=function(){var b=
a;this.reset_tooltips();return b};this.add_tooltip=function(b,c,d){if(b&&c)d=d?PK.clone(d):{},d.text=c,a[b]=d}};PK.data_validation=new function(){var a=Object({alpha:/^[a-zA-Z_]+$/,alphanum:/^[a-zA-Z0-9_]+$/,email:/^(\w+)([\-+.][\w]+)*@(\w[\-\w]*\.){1,5}([A-Za-z]){2,6}$/,url:/((((^https?)|(^ftp)):\/\/)?([\-\w]+\.)+\w{2,3}(\/[%\-\w]+(\.\w{2,})?)*(([\w\-\.\?\\\/+@&#;`~=%!]*)(\.\w{2,})?)*\/?)/i}),b={number:{default_:new function(){this[""]=function(a){return!isNaN(Number(a))}}},string:{default_:new function(){this[""]=function(){return!0}}},large_text:{default_:new function(){this[""]=function(){return!0}}},url:{default_:new function(){this[""]=
function(c){return c=="http://"||a.url.test(c)}}},ip:{default_:new function(){this[""]=function(a){if(a=="")return!0;var b=a.match(/^(\d{1,3})\.(\d{1,3})\.(\d{1,3})\.(\d{1,3})$/);if(a=="0.0.0.0"||a=="255.255.255.255"||b==null)return!1;for(a=0;a<4;a++)if(b[a]>255)return!1;return!0}}}};this.register_validator=function(a,d,e,f){if(!b[a])return CRITICAL_ERROR("data_validation: Invalid data type: "+a),!1;d||(d="default_");e||(e="");b[a][d]||(b[a][d]={});b[a][d][e]=f};this.get_validator=function(a,d,e){if(b[a]){var f=
b[a].default_;b[a][d]&&(f=b[a][d]);if(f){if(!e||e.length==0)return f[""];return f[e[e.length-1]]}}}};PKLE.data_value_class=new function(){var a={number:{default_:new function(){this[""]={3:"numberer"}}},string:{default_:new function(){this[""]={server:"stringer"}}},large_text:{},url:{},ip:{}};this.add=function(b,c,d,e,f){if(!a[b])return CRITICAL_ERROR("data_value_class: Invalid data type: "+b),!1;c||(c="default_");d||(d="");a[b][c]||(a[b][c]={});a[b][c][d]||(a[b][c][d]={});a[b][c][d][e]=f};this.get=function(b,c,d,e){if(a[b]){var f=a[b].default_;a[b][c]&&(f=a[b][c]);if(f&&(b=!d||d.length==0?f[""]:
PK.data_node_helper.get_scoped_value(f,d,!0)))return b[e]}}};PKLE.default_value_generators=new function(){var a=function(a,c){return new function(){var b=void 0;this.reset=function(){b=void 0};this.result=function(){return b};this.visit_root=function(){return!0};this.visit_node=function(d,i,j){b||(b={list:[],set:{}});d=!c||j&&j[c];j=i.children&&i.children.length>0&&(typeof i.children[0]=="string"||typeof i.children[0]=="number");i&&i.type==a&&d&&j&&(b.list.push(i.children[0]),b.set[i.children[0]]=!0);return!0}}},b=function(c,b,d){var h=a(c,b);return function(){var a=
logic_editor.get_object_data();h.reset();a=PK.data_tree_processor.for_each(a.data,h);if(typeof d==="string"){for(var c=1,b=PK.fill_placeholders(d,[c]);a.set[b];)b=PK.fill_placeholders(d,[++c]);return b}else if(typeof d==="number"){for(c=d;a.set[c];)++c;return c}CRITICAL_ERROR("Template string must be a string number!");return"<invalid>"}},c=function(c,b,d){var h=a(c,b);return function(){var a=logic_editor.get_object_data();h.reset();a=PK.data_tree_processor.for_each(a.data,h);if(!a||!a.list||a.list.length==
0)return PK.fill_placeholders(d,[1]);return a.list[a.list.length-1]}},d={};this.get=function(a,c){assert(a,"No node type");if(d[a])return d[a][c]};this.register=function(a,c,b){assert(a,"No node type");assert(c,"No scope");d[a]||(d[a]={});d[a][c]=b};this.register_common_generator=function(a,c,d,h){this.register(a,c,b(a,h,d))};this.register_existing_var_name_generator=function(a,b,d,h){this.register(a,b,c(a,d,h))}};PKLE.execution_error_analyser=new function(){var a={},b=function(a,c,b){return function(g,h){if(h.length<a.length||h.substring(0,a.length)!=a)return!1;assert(g.children[c],"Invalid index of problematic child");var i=h;b&&(i=b+h.substring(a.length));return{node:g.children[c],msg:i}}},c=function(a,c,b){var g=/^bad argument #([0-9.]+) to '(\S+)' \((.*)\)$/;return function(h,i){var j=g.exec(i);if(j==null||j.length<3||j[2]!=a)return!1;var l=j[1];if(!l||l.length==0)return CRITICAL_ERROR("Invalid format of error message (1):"+
i),!1;for(var l=l.split("."),n=h,m=0;m<l.length;m++){var k=parseInt(l[m]);if(!k)return CRITICAL_ERROR("Invalid format of error message (2):"+i),!1;k--;c?n=c(m,k,n):(assert(n.children[k],"Invalid index of problematic child"),n=n.children[k])}return{node:n,msg:b?b(h,l,j[2],j[3]):i}}};this.get_problematic_node_qualifiers_by_node_type=function(c){assert(c,"No node type");return a[c]};this.add_problematic_node_qualifier=function(c,b){assert(c,"No node type");a[c]||(a[c]=[]);a[c].push(b)};this.add_simple_problematic_node_qualifier=
function(a,c,f,g){this.add_problematic_node_qualifier(a,b(c,f,g))};this.add_natural_problematic_node_qualifier=function(a,b,f,g){this.add_problematic_node_qualifier(a,c(b,f,g))};this.determine_problematic_node=function(c,b){if(!b)return!1;var f=PK.data_tree_processor.determine_problematic_node(c,b.stack,b.line_number_table);assert(f,"problematic node not found");var g=b.msg;if(b.msg){var h;a:{h=f;var i=b.msg;if(i&&a[h.type])for(var j=a[h.type],l=0;l<j.length;l++){var n=j[l](h,i);if(n){h=n;break a}}h=
!1}if(h)f=h.node,g=h.msg}return{problematic_node_id:PK.data_node_id.make_node_id(f),msg:g}}};PKLE.i18n_en=new function(){var a={"Invalid data":"Invalid data","Value is invalid":"Value is invalid","List child has invalid type":"List child has invalid type","Add new item":"Add new ${1}","Insert new item":"Insert new ${1}","Insert new item before":"Insert new ${1} before","Insert new item after":"Insert new ${1} after","Delete item":"Delete ${1}","Exchange item with previous":"Exchange with previous ${1}","Exchange item with next":"Exchange with next ${1}","Copy item to clipboard":"Copy ${1} to clipboard",
"Paste from clipboard to item":"Paste ${1} from clipboard",literal:"literal",value:"value",record:"record","Add another optional parameter":"Add another optional parameter","Delete this optional parameter":"Delete this optional parameter","Set/clear optional parameters":"Set/clear optional parameters","Change item":"Change ${1}",variant:"variant","boolean expression":"boolean expression","numeric expression":"numeric expression",statement:"statement","string expression":"string expression",copy_paste_in_context_menu:"Copy/Paste in context menu",
must_render_controls:"Show controls",use_own_tags:"Advanced coloring",use_menu_item_delegating:"Delegate menu items",use_creation_menu_delegating:"Delegate creation menu",enable_menu_colorization:"Colorized menus",advanced_menu_colorization:"Advanced menu colorization",universal_C_button:"Universal (C) button",render_new_item_placeholders_in_list:"Easy insertion in list"};this.init=function(){PK.i18n.extend_language_pack("English",a)}};PKLE.i18n_ru=new function(){var a={"Invalid data":"\u041d\u0435\u0432\u0435\u0440\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435","Value is invalid":"\u041d\u0435\u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u043e\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435","List child has invalid type":"\u041d\u0435\u0432\u0435\u0440\u043d\u044b\u0439 \u0442\u0438\u043f \u043f\u043e\u0434\u043d\u043e\u0434\u044b \u0441\u043f\u0438\u0441\u043a\u0430","Add new item":"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u044d\u043b\u0435\u043c\u0435\u043d\u0442 '${1}'",
"Insert new item":"\u0412\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u044d\u043b\u0435\u043c\u0435\u043d\u0442 '${1}'","Insert new item before":"\u0412\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u044d\u043b\u0435\u043c\u0435\u043d\u0442 '${1}' \u043f\u0435\u0440\u0435\u0434 \u0442\u0435\u043a\u0443\u0449\u0438\u043c","Insert new item after":"\u0412\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u044d\u043b\u0435\u043c\u0435\u043d\u0442 '${1}' \u043f\u043e\u0441\u043b\u0435 \u0442\u0435\u043a\u0443\u0449\u0435\u0433\u043e",
"Delete item":"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u044d\u043b\u0435\u043c\u0435\u043d\u0442 '${1}'","Exchange item with previous":"\u041e\u0431\u043c\u0435\u043d\u044f\u0442\u044c \u044d\u043b\u0435\u043c\u0435\u043d\u0442 '${1}' \u0441 \u043f\u0440\u0435\u0434\u044b\u0434\u0443\u0449\u0438\u043c","Exchange item with next":"\u041e\u0431\u043c\u0435\u043d\u044f\u0442\u044c \u044d\u043b\u0435\u043c\u0435\u043d\u0442 '${1}' \u0441\u043e \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u043c",
"Copy item to clipboard":"\u0421\u043a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u044d\u043b\u0435\u043c\u0435\u043d\u0442 '${1}' \u0432 \u0431\u0443\u0444\u0435\u0440 \u043e\u0431\u043c\u0435\u043d\u0430","Paste from clipboard to item":"\u0412\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u044d\u043b\u0435\u043c\u0435\u043d\u0442 '${1}' \u0438\u0437 \u0431\u0443\u0444\u0435\u0440\u0430 \u043e\u0431\u043c\u0435\u043d\u0430",literal:"\u043b\u0438\u0442\u0435\u0440\u0430\u043b",value:"\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435",
record:"\u0437\u0430\u043f\u0438\u0441\u044c","Add another optional parameter":"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043e\u043f\u0446\u0438\u043e\u043d\u0430\u043b\u044c\u043d\u044b\u0439 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440","Delete this optional parameter":"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u043e\u043f\u0446\u0438\u043e\u043d\u0430\u043b\u044c\u043d\u044b\u0439 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440","Set/clear optional parameters":"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c/\u0443\u0434\u0430\u043b\u0438\u0442\u044c \u043e\u043f\u0446\u0438\u043e\u043d\u0430\u043b\u044c\u043d\u044b\u0439 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440",
"Change item":"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u044d\u043b\u0435\u043c\u0435\u043d\u0442 '${1}'",variant:"\u0432\u0430\u0440\u0438\u0430\u043d\u0442","boolean expression":"\u043b\u043e\u0433\u0438\u0447\u0435\u0441\u043a\u043e\u0435 \u0432\u044b\u0440\u0430\u0436\u0435\u043d\u0438\u0435","numeric expression":"\u0447\u0438\u0441\u043b\u043e\u0432\u043e\u0435 \u0432\u044b\u0440\u0430\u0436\u0435\u043d\u0438\u0435",statement:"\u0438\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u044f",
"string expression":"\u0441\u0442\u0440\u043e\u043a\u043e\u0432\u043e\u0435 \u0432\u044b\u0440\u0430\u0436\u0435\u043d\u0438\u0435",copy_paste_in_context_menu:"Copy/Paste \u0432 \u043a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u043d\u044b\u0445 \u043c\u0435\u043d\u044e",must_render_controls:"\u0423\u043f\u0440. \u044d\u043b\u0435\u043c\u0435\u043d\u0442\u044b",use_own_tags:"\u0420\u0430\u0441\u043a\u0440\u0430\u0441\u043a\u0430",use_menu_item_delegating:"\u0414\u0435\u043b\u0435\u0433\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u0443\u043d\u043a\u0442\u043e\u0432 \u043c\u0435\u043d\u044e",
use_creation_menu_delegating:"\u0414\u0435\u043b\u0435\u0433\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u043c\u0435\u043d\u044e \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f",enable_menu_colorization:"\u0426\u0432\u0435\u0442\u043d\u044b\u0435 \u043c\u0435\u043d\u044e",advanced_menu_colorization:"\u041f\u0440\u043e\u0434\u0432. \u0440\u0430\u0441\u043a\u0440\u0430\u0441\u043a\u0430 \u043c\u0435\u043d\u044e",universal_C_button:"\u0423\u043d\u0438\u0432\u0435\u0440\u0441\u0430\u043b\u044c\u043d\u0430\u044f \u043a\u043d\u043e\u043f\u043a\u0430 (C)",
render_new_item_placeholders_in_list:"\u041f\u0440\u043e\u0434\u0432. \u0432\u0441\u0442\u0430\u0432\u043a\u0430 \u0432 \u0441\u043f\u0438\u0441\u043e\u043a"};this.init=function(){PK.i18n.extend_language_pack("Russian",a)}};logic_editor=new function(){var a,b,c,d,e;this.error={NO_OBJECT_DATA:1,INVALID_SCHEMA_VERSION:2,OLD_SCHEMA_VERSION:3};this.check_schema_version=function(a){if(!a)return!1;if(a.name!=PK.node_schema_version.name)return!1;if(a["1"]==PK.node_schema_version["1"]&&a["2"]==PK.node_schema_version["2"]&&a["3"]==PK.node_schema_version["3"])return!0;if(a["1"]<PK.node_schema_version["1"]||a["1"]==PK.node_schema_version["1"]&&a["2"]<PK.node_schema_version["2"]||a["1"]==PK.node_schema_version["1"]&&a["2"]==PK.node_schema_version["2"]&&
a["3"]<PK.node_schema_version["3"])return{upgradable:!0};return!1};this.init=function(b,e,f){a=b;c=e;d=f;PKLE.UndoRedo.Clear()};this.render=function(a){assert(a,"No gui object data!");var c=PK.data_tree_processor.validate(b.data);c&&c.length>0&&(LOG("-------"+I18N("Invalid data")+"-------"),LOG(c.join("\n")),LOG("---------------------------"),GUI_ERROR("<b>"+I18N("Invalid data")+":</b><br>"+c.join("<br>")));PK.data_tree_processor.render(b.data,a,e)};this.log_object_data=function(){LOG("------------ CODE DATA START --------------");
LOG(JSON.stringify(b));LOG("------------ CODE DATA END ----------------")};this.get_object_data=function(){return b};this.set_object_data=function(a,f,g){assert(a,"No object data!");g===void 0&&(g=!0);if(!g||!c||c(!0))b=a,PK.data_tree_controller.init(b.data,c,d),e=void 0,f&&((result=PKLE.execution_error_analyser.determine_problematic_node(b.data,f))?e={id:result.problematic_node_id,description:'<span style="color:red;font-weight:bold;">'+result.msg+"</span>"}:CRITICAL_ERROR("Can't determine problematic node for given execution result!")),
g&&d&&d()};var f=function(a){if(a==void 0||a==null)return null;var c={type:a.type,id:a.id};if(a.children)for(var b=0;b<a.children.length;b++){var d=typeof a.children[b];c[b+1]=d=="string"||d=="number"||d=="boolean"?a.children[b]:f(a.children[b])}return c},g=function(a){if(!(a==void 0||a==null)){var c=PK.data_node_helper.make_node();c.type=a.type;if(a.id)c.id=a.id,PK.data_node_id.notify_existing_node_id(a.id);var b=[],d=0,e;for(e in a){var f=Number(e);!isNaN(f)&&f>d&&(d=f)}for(f=1;f<=d;){e=a[String(f)];
if(e!==null){var k=typeof e;b[f-1]=k=="string"||k=="number"||k=="boolean"?e:g(e)}f++}if(b.length>0)c.children=b;return c}};this.serialize_object_data_to_json=function(a){if(a)return{schema_version:a.schema_version,data:f(a.data),title:a.title}};this.unserialize_object_data_from_json=function(a){if(!a||!a.schema_version||!a.data)return CRITICAL_ERROR("Invalid format of object data: "+Ext.encode(a)),{error:this.error.NO_OBJECT_DATA};var c=this.check_schema_version(a.schema_version);if(!c)return CRITICAL_ERROR("Invalid schema version: "+
Ext.encode(a.schema_version)),{error:this.error.INVALID_SCHEMA_VERSION};if(c!=!0)return c.upgradable?{error:this.error.OLD_SCHEMA_VERSION}:(CRITICAL_ERROR("Non-upgradable schema version: "+Ext.encode(a.schema_version)),{error:this.error.INVALID_SCHEMA_VERSION});return{schema_version:a.schema_version,data:g(a.data),title:a.title}};this.send_object_data_to_server=function(c){var d=logic_editor.serialize_object_data_to_json(b);LOG("------------ SENT CODE DATA START --------------");LOG(JSON.stringify(d));
LOG("------------ SENT CODE DATA END ----------------");Ext.Ajax.request({url:a,success:function(a){c(a.responseText)},failure:function(a){CRITICAL_ERROR("Server error, status = "+a.status);Ext.Msg.alert("Error","Status: "+a.status)},jsonData:d})}};PKLE.item_list_transformer_helper=new function(){var a=function(a,c){var d=a.items;if(typeof c=="number")return d.get(c);assert(typeof c=="string","invalid type of find_menu_item_ param");for(var e=0;e<d.length;e++){var f=d.get(e);if(f.text==c)return f}LOG("find_menu_item_(): Not found menu item `"+c+"`")};this.add_shortcut=function(b,c,d,e,f){assert(b&&typeof b=="object","invalid format of menu");assert(c&&typeof c=="object","invalid format of target");assert(d&&typeof d=="object","invalid format of src");
for(var g=void 0,h=b,i=0;i<d.length;i++){if(!h)return b;g=a(h,d[i]);if(!g)return b;h=g.menu}d=b;for(i=0;i<c.length;i++){if(!d)return b;d=a(d,c[i]);if(!d)return b;d=d.menu}if(!d||!d.items)return b;e===void 0?e=d.items.length:(c=!d||!d.items||d.items.length==0?!1:d.items.get(0).itemCls=="x-menu-text"?!0:!1,c&&e++);c={};if(g.initialConfig)for(var j in g.initialConfig)c[j]=g.initialConfig[j];if(f)for(j in f)c[j]=f[j];d.insert(e,new Ext.menu.Item({text:c.text,iconCls:c.iconCls,value:c.value,tooltip:c.tooltip,
disabled:c.disabled,handler:c.handler,cls:c.cls,xtype:c.xtype,checked:c.checked,menu:c.menu}));return b}};
PKLE.menu_transformers=new function(){var a=function(a){assert(a&&typeof a=="object","invalid format of shortcuts");return function(){return function(c){for(var b=0;b<a.length;b++)PKLE.item_list_transformer_helper.add_shortcut(c,a[b].target,a[b].src,a[b].target_order,a[b].override_properties);return c}}},b=function(a,c){assert(c&&typeof c=="object","invalid format of enabled_menu_items_by_scope");return function(a){var b=PK.data_node_helper.DEFAULT_SCOPE;a&&a.length>0&&(b=a[a.length-1]);if(c[b])return function(a){if(a.value&&
!c[b][a.value])a.disabled=!0;return a}}},c={};this.type={TRANSFORM_ITEM:"transform_item",TRANSFORM_MENU:"transform_menu"};this.get=function(a,b){assert(a,"No node type");if(c[a]){var f={},g;for(g in c[a])f[g]=c[a][g](b);return f}};this.register=function(a,b,f){assert(a,"No node type");c[a]||(c[a]={});c[a][b]=f};this.register_common_item_transformer=function(a,c){this.register(a,this.type.TRANSFORM_ITEM,b(a,c))};this.register_common_shortcut_adder=function(c,b){this.register(c,this.type.TRANSFORM_MENU,
a(b))}};PKLE.Settings=new function(){var a=this,b={},c=[],d=function(d,f){c.push(d);b[d]=f;a[d]=function(){return b[d]};a["set_"+d+"_state"]=function(a){b[d]=a}};this.names=c;this.get=function(a){if(this[a])return this[a]()};this.set=function(a,c){var b="set_"+a+"_state";if(this[b])return this[b](c)};(function(a){if(a&&a.length!=0)for(var c in a)d(c,a[c])})({copy_paste_in_context_menu:!1,must_render_controls:!0,use_own_tags:!0,use_menu_item_delegating:!0,use_creation_menu_delegating:!0,enable_menu_colorization:!0,
advanced_menu_colorization:!0,universal_C_button:!0,render_new_item_placeholders_in_list:!0})};PKLE.UndoRedo=new function(){var a;this.Init=function(b){a=PK.make_undo_redo(b)};this.Before_do=function(){a&&a.Before_do(logic_editor.get_object_data())};this.Undo=function(){if(a&&a.Can_undo()){var b=logic_editor.get_object_data(),b=a.Undo(b);logic_editor.set_object_data(b)}};this.Redo=function(){if(a&&a.Can_redo()){var b=a.Redo();logic_editor.set_object_data(b)}};this.Can_undo=function(){return a&&a.Can_undo()};this.Can_redo=function(){return a&&a.Can_redo()};this.Clear=function(){a&&a.Clear()}};PKLE.data_tree=new function(){function a(c,d,e,f,g,h,i,j){if(!(c===null||c===void 0)){var l=c[g];if(l!==void 0){var n=!1,m=e[l];if(h||m)m=h!==void 0?h(m,d,c):m(d,c),m==b?n=!0:assert(m===void 0,"unexpected down handler result");if(!n&&(m=c.children))for(var k=0;k<m.length;k++)a(m[k],d,e,f,g,h,i,j);if(!n&&(e=f[l],i||e))i!==void 0?i(e,d,c):e(d,c)}}}var b="break";this.BREAK=b;this.walk=function(c,b,e,f,g){assert(e!==void 0,"bad tag_field");assert(b.down||b.up,"need some handlers");var h=b.down,i=b.up;
h||(h={});i||(i={});a(c,b,h,i,e,f,g,{})}};PK.LEWidgetsImpl.html.make_button=function(a,b,c,d,e,f,g,h){h||(h=PK.browser_dom.generated_id());var i=' id="'+h+'" type="button"';g!==void 0&&(i+=" disabled");c&&PK.data_tree_rendering.add_tooltip(h,c);d&&(i+=' onclick="'+d+"('"+h+"')\"");e&&(i+=" onmouseover = \"PK.LEWidgets.helper.highlight_parent('"+h+"',"+(e.check_parent?"true":"false")+')"',i+=" onmouseout = \"PK.LEWidgets.helper.unhighlight_parent('"+h+"',"+(e.check_parent?"true":"false")+')"');return a===void 0?PK.LEWidgetsImpl.html.helper.wrap_object("<input"+
i+(f?f:"")+' class="'+b+'"/>'):b===void 0?PK.LEWidgetsImpl.html.helper.wrap_object("<input"+i+(f?f:"")+' class="button-with-text" value="'+a+'">'):PK.LEWidgetsImpl.html.helper.wrap_object("<input"+i+(f?f:"")+' class="'+b+'" value="'+a+'">')};PK.LEWidgetsImpl.html.add_menu_item_=function(a,b){var c=b.xtype,d=void 0;if(b.checkbox)c="menucheckitem",d=b.checkbox.state;if(b.disabled)b.additionalCls="disabled_variant_choice";a.push({hideLabel:!0,text:b.text,iconCls:b.iconCls,value:b.value,tooltip:b.description,disabled:b.disabled,handler:b.handler,menu:b.submenu,cls:b.additionalCls,xtype:c,checked:d})};
PK.LEWidgetsImpl.html.make_menu=function(a,b,c,d,e,f,g,h,i){PKLE.Settings.enable_menu_colorization()||(d=void 0);assert(typeof e=="object","menu_items must be an array, not a "+typeof e);assert(typeof g=="function","on_change must be a function, not a "+typeof g+", menu_items: "+Ext.encode(e));h===void 0&&(h=!0);i===void 0&&(i=!1);var j=[],l=!1,n=!1;c&&j.push({text:c,ctCls:"choice_caption",xtype:"menutextitem"});for(c=0;c<e.length;c++){var m=!1;if(e[c]===null)CRITICAL_ERROR("Menu items contains null!");
else if(typeof e[c]=="string")j.push(e[c]);else{var k=PK.clone(e[c]);f&&f.transform_item&&(k=f.transform_item(k));if(a)k.disabled=!0;if(k){k.disabled||(n=!0);if(k.submenu_maker||k.submenu){var o;o=k.submenu_maker?k.submenu_maker(k.submenu_caption,k.disabled):PK.LEWidgetsImpl.html.make_menu(a,b,k.submenu_caption,d,k.submenu,f,g,void 0,!0);k.submenu=o.menu;m=o.contains_current_choice;k.disabled=!o.contains_enabled_items;o.contains_enabled_items&&(n=!0)}else if(!k.disabled)k.handler=function(a){g(a.value)};
b!==void 0&&b!==!1&&k.value==b&&(m=!0);k.additionalCls=d;if(m){if(h)k.additionalCls="current_variant_choice";l=!0}PK.LEWidgetsImpl.html.add_menu_item_(j,k)}}}a=new Ext.menu.Menu({enableScrolling:!0,floating:!0,showSeparator:!1,items:j,cls:d});!i&&f&&f.transform_menu&&(a=f.transform_menu(a));return{menu:a,contains_current_choice:l,contains_enabled_items:n}};PK.LEWidgetsImpl.html.show_choice_editor=function(a,b){Ext.QuickTips.disable();Ext.QuickTips.enable();Ext.get(b).parent();a.render();a.show(b)};
PK.LEWidgetsImpl.html.make_choice_editor=function(a,b,c,d,e,f,g){return function(h){var i=PK.LEWidgetsImpl.html.make_menu(!1,a,b,c,d,e,f,g,!1);PK.LEWidgetsImpl.html.show_choice_editor(i.menu,h)}};PK.LEWidgetsImpl.html.make_container=function(a,b,c,d,e,f,g){a=a?"node-"+a:PK.browser_dom.generated_id();e=e?"div":"span";d||(d="container-"+c);d=d.replace(/\./gi,"-");c="<"+e+' id="'+a+'" class="'+d+'"';f&&PK.data_tree_rendering.add_tooltip(a,f);g&&(c+=' onclick="'+g+"('"+a+"')\"");c+=">";if(!b)return c+" </"+e+">";return[c,PK.LEWidgetsImpl.html.helper.wrap_object(b)," </"+e+">"]};PK.LEWidgetsImpl.html.make_label=function(a){return PK.LEWidgetsImpl.html.helper.wrap_object(a)};PK.LEWidgetsImpl.html.make_value_editor=function(a,b,c,d){return function(e){var f=Ext.get(e),g=f.dom.innerHTML,h=!1;f.getSize().width<Ext.util.TextMetrics.measure(f,"WWWWW").width&&f.update("WWWWW");var i;i=new Ext.Editor(Ext.apply({autoSize:d?!0:"width",alignment:"l-l",hideEl:!0,listeners:{canceledit:function(){f.update(g)},beforecomplete:function(a,b){if(c&&!c(b))return Ext.Msg.alert(I18N("Error"),I18N("Value is invalid")+": "+b,function(){i.show(!0)}),!1;return!0},complete:function(a,c,d){c!==
d&&(b(c),h=!0)},beforehide:function(){h||f.update(g)}},field:{xtype:d?"textarea":"textfield",selectOnFocus:!0}},{shadow:!1,completeOnEnter:!0,cancelOnEsc:!0,updateEl:!0,ignoreNoChange:!0}));i.startEdit(f,a)}};
PK.LEWidgetsImpl.html.make_text_field=function(a,b,c,d,e,f){d===void 0&&(d=!0);var g=void 0,h=void 0;if(b!==void 0&&a.length>b){h=0;for(g="";g.length<800&&h<a.length;)g+=PK.entityify_and_escape_quotes(a.substring(h,h+80))+"<br>",h+=80;g.length>=800&&(g+="..");h="auto";a.length>800&&(h=450);a=a.substring(0,b)+".."}b=PK.browser_dom.generated_id();c=c?"editable-large-text":"editable-text";e&&(c+=" "+e);e="";f&&(e=' onclick="'+f+"('"+b+"')\"");g&&PK.data_tree_rendering.add_tooltip(b,g,{width:h});return PK.LEWidgetsImpl.html.helper.wrap_object('<span id="'+
b+'" class="'+c+'"'+e+">"+(d?PK.entityify_and_escape_quotes(a):a)+"</span>")};PK.LEWidgetsImpl.html.helper=new function(){this.wrap_object=function(a){if(a instanceof Array)return a;return[a]};var a=function(a){if(typeof a=="undefined")return"";if(typeof a=="string"||typeof a=="number")return a;assert(typeof a=="object"&&a instanceof Array,"items is not array or string/number: "+typeof a);if(a.length==0)return"";for(var b=[],a=[{items:a,i:0}];a.length>0;){var e=a[a.length-1];e.i>=e.items.length?(e.items.length=0,a.pop()):(e=e.items[e.i],a[a.length-1].i++,typeof e!="undefined"&&
(typeof e=="string"||typeof e=="number"?b.push(e):(assert(typeof e=="object"&&e instanceof Array,"item is not array or string/number/undefined: "+typeof e),e.length!=0&&a.push({items:e,i:0}))))}return b.join("")};this.fill_panel_data=function(c,b){b.raw_html=a(c);b.use_std_html_styling=!0;var e=I18N("<CN>",!0);if(e)b.raw_html="<div>"+b.raw_html+"</div><div>"+e+"</div>"};var b=function(a,b,e){if(a=Ext.get(a))a=a.parent(),b&&(b=a.parent())&&b.is("li")&&(a=b),a&&(e?a.addClass("highlighted"):a.removeClass("highlighted"))};
this.highlight_parent=function(a,d){b(a,d,!0)};this.unhighlight_parent=function(a,d){b(a,d,!1)}};PK.node_schema={"tq.sq.reviews.filter.date":{handler:PK.data_tree_node_processor_makers.variant({child_types:[],name:"tq.sq.reviews.filter.date"},{label:"\u0424",title:"\u0424\u0438\u043b\u044c\u0442\u0440 \u043f\u043e \u0434\u0430\u0442\u0435",scopes:{"":[{type:"tq.sq.reviews.filter.date.off",render_template:"${MENU}${1}",menu_item:"\u041d\u0435 \u0444\u0438\u043b\u044c\u0442\u0440\u043e\u0432\u0430\u0442\u044c",description:""},{type:"tq.sq.reviews.filter.date.on",render_template:"${MENU}${1}",menu_item:"\u0424\u0438\u043b\u044c\u0442\u0440\u043e\u0432\u0430\u0442\u044c",
description:""}]}})},"tq.date":{handler:PK.data_tree_node_processor_makers.variant({child_types:[],name:"tq.date",init:{"":"tq.date.now","tq.date.from":"tq.date.value"}},{label:"\u0414",title:"\u0414\u0430\u0442\u0430",scopes:{"":[{type:"tq.date.now",render_template:"${MENU}${1}",menu_item:"\u0421\u0435\u0439\u0447\u0430\u0441",description:""},{type:"tq.date.value",render_template:"${MENU}${1}",menu_item:"\u041a\u043e\u043d\u043a\u0440\u0435\u0442\u043d\u0430\u044f \u0434\u0430\u0442\u0430",description:""}]}})},
"tq.root":{handler:PK.data_tree_node_processor_makers.record({child_types:["tq.sq.reviews"],name:"tq.root"},{common:'<div style="padding:10px">${1}</div>',title:"\u041a\u043e\u0440\u0435\u043d\u044c"})},"tq.sq.reviews.filter.thanks.visible":{handler:PK.data_tree_node_processor_makers.variant({child_types:[],name:"tq.sq.reviews.filter.thanks.visible"},{label:"\u0431",title:"\u041e\u0442\u043e\u0431\u0440\u0430\u0436\u0430\u0442\u044c \u0447\u0438\u0441\u043b\u043e \u0431\u043b\u0430\u0433\u043e\u0434\u0430\u0440\u043d\u043e\u0441\u0442\u0435\u0439",
scopes:{"":[{type:"tq.sq.reviews.filter.thanks.visible.no",render_template:"${MENU}${1}",menu_item:"\u043d\u0435 \u043f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0442\u044c",description:""},{type:"tq.sq.reviews.filter.thanks.visible.yes",render_template:"${MENU}${1}",menu_item:"\u043f\u043e\u043a\u0430\u0437\u0430\u0442\u044c",description:""}]}})},"tq.sq.reviews.filter.thanks.visible.no":{handler:PK.data_tree_node_processor_makers.literal({child_types:[],name:"tq.sq.reviews.filter.thanks.visible.no"},
{common:"\u043d\u0435 \u043f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0442\u044c",title:"tq.sq.reviews.filter.thanks.visible"})},"tq.sq.reviews.filter.thanks.visible.yes":{handler:PK.data_tree_node_processor_makers.literal({child_types:[],name:"tq.sq.reviews.filter.thanks.visible.yes"},{common:"\u043f\u043e\u043a\u0430\u0437\u0430\u0442\u044c",title:"tq.sq.reviews.filter.thanks.visible"})},"tq.sq.reviews.filter.thanks.limit":{handler:PK.data_tree_node_processor_makers.variant({child_types:[],name:"tq.sq.reviews.filter.thanks.limit"},
{label:"\u0411",title:"\u0424\u0438\u043b\u044c\u0442\u0440 \u043f\u043e \u0447\u0438\u0441\u043b\u0443 \u0431\u043b\u0430\u0433\u043e\u0434\u0430\u0440\u043d\u043e\u0441\u0442\u0435\u0439",scopes:{"":[{type:"tq.sq.reviews.filter.thanks.limit.unlimited",render_template:"${MENU}${1}",menu_item:"\u0432\u0441\u0435",description:""},{type:"tq.sq.reviews.filter.thanks.limit.lt50",render_template:"${MENU}${1}",menu_item:"&lt;50",description:""},{type:"tq.sq.reviews.filter.thanks.limit.50-100",render_template:"${MENU}${1}",
menu_item:"50&mdash;100",description:""},{type:"tq.sq.reviews.filter.thanks.limit.100-300",render_template:"${MENU}${1}",menu_item:"100&mdash;300",description:""},{type:"tq.sq.reviews.filter.thanks.limit.gt300",render_template:"${MENU}${1}",menu_item:"&ge;300",description:""}]}})},"tq.sq.reviews.filter.thanks.limit.unlimited":{handler:PK.data_tree_node_processor_makers.literal({child_types:[],name:"tq.sq.reviews.filter.thanks.limit.unlimited"},{common:"\u0432\u0441\u0435",title:"tq.sq.reviews.filter.thanks.limit"})},
"tq.sq.reviews.filter.thanks.limit.lt50":{handler:PK.data_tree_node_processor_makers.literal({child_types:[],name:"tq.sq.reviews.filter.thanks.limit.lt50"},{common:"&lt;50",title:"tq.sq.reviews.filter.thanks.limit"})},"tq.sq.reviews.filter.thanks.limit.50-100":{handler:PK.data_tree_node_processor_makers.literal({child_types:[],name:"tq.sq.reviews.filter.thanks.limit.50-100"},{common:"50&mdash;100",title:"tq.sq.reviews.filter.thanks.limit"})},"tq.sq.reviews.filter.thanks.limit.100-300":{handler:PK.data_tree_node_processor_makers.literal({child_types:[],
name:"tq.sq.reviews.filter.thanks.limit.100-300"},{common:"100&mdash;300",title:"tq.sq.reviews.filter.thanks.limit"})},"tq.sq.reviews.filter.thanks.limit.gt300":{handler:PK.data_tree_node_processor_makers.literal({child_types:[],name:"tq.sq.reviews.filter.thanks.limit.gt300"},{common:"&ge;300",title:"tq.sq.reviews.filter.thanks.limit"})},"tq.sq.reviews.filter.impressions.visible":{handler:PK.data_tree_node_processor_makers.variant({child_types:[],name:"tq.sq.reviews.filter.impressions.visible"},{label:"\u043f",
title:"\u041e\u0442\u043e\u0431\u0440\u0430\u0436\u0430\u0442\u044c \u0447\u0438\u0441\u043b\u043e \u043f\u0440\u043e\u0441\u043c\u043e\u0442\u0440\u043e\u0432",scopes:{"":[{type:"tq.sq.reviews.filter.impressions.visible.no",render_template:"${MENU}${1}",menu_item:"\u043d\u0435 \u043f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0442\u044c",description:""},{type:"tq.sq.reviews.filter.impressions.visible.yes",render_template:"${MENU}${1}",menu_item:"\u043f\u043e\u043a\u0430\u0437\u0430\u0442\u044c",
description:""}]}})},"tq.sq.reviews.filter.impressions.visible.no":{handler:PK.data_tree_node_processor_makers.literal({child_types:[],name:"tq.sq.reviews.filter.impressions.visible.no"},{common:"\u043d\u0435 \u043f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0442\u044c",title:"tq.sq.reviews.filter.impressions.visible"})},"tq.sq.reviews.filter.impressions.visible.yes":{handler:PK.data_tree_node_processor_makers.literal({child_types:[],name:"tq.sq.reviews.filter.impressions.visible.yes"},{common:"\u043f\u043e\u043a\u0430\u0437\u0430\u0442\u044c",
title:"tq.sq.reviews.filter.impressions.visible"})},"tq.sq.reviews.filter.impressions.limit":{handler:PK.data_tree_node_processor_makers.variant({child_types:[],name:"tq.sq.reviews.filter.impressions.limit"},{label:"I",title:"\u0424\u0438\u043b\u044c\u0442\u0440 \u043f\u043e \u0447\u0438\u0441\u043b\u0443 \u043f\u0440\u043e\u0441\u043c\u043e\u0442\u0440\u043e\u0432",scopes:{"":[{type:"tq.sq.reviews.filter.impressions.limit.unlimited",render_template:"${MENU}${1}",menu_item:"\u0432\u0441\u0435",description:""},
{type:"tq.sq.reviews.filter.impressions.limit.lt5",render_template:"${MENU}${1}",menu_item:"&lt;5",description:""},{type:"tq.sq.reviews.filter.impressions.limit.5-10",render_template:"${MENU}${1}",menu_item:"5&mdash;10",description:""},{type:"tq.sq.reviews.filter.impressions.limit.10-50",render_template:"${MENU}${1}",menu_item:"10&mdash;50",description:""},{type:"tq.sq.reviews.filter.impressions.limit.gte50",render_template:"${MENU}${1}",menu_item:"&ge;50",description:""}]}})},"tq.sq.reviews.filter.impressions.limit.unlimited":{handler:PK.data_tree_node_processor_makers.literal({child_types:[],
name:"tq.sq.reviews.filter.impressions.limit.unlimited"},{common:"\u0432\u0441\u0435",title:"tq.sq.reviews.filter.impressions.limit"})},"tq.sq.reviews.filter.impressions.limit.lt5":{handler:PK.data_tree_node_processor_makers.literal({child_types:[],name:"tq.sq.reviews.filter.impressions.limit.lt5"},{common:"&lt;5",title:"tq.sq.reviews.filter.impressions.limit"})},"tq.sq.reviews.filter.impressions.limit.5-10":{handler:PK.data_tree_node_processor_makers.literal({child_types:[],name:"tq.sq.reviews.filter.impressions.limit.5-10"},
{common:"5&mdash;10",title:"tq.sq.reviews.filter.impressions.limit"})},"tq.sq.reviews.filter.impressions.limit.10-50":{handler:PK.data_tree_node_processor_makers.literal({child_types:[],name:"tq.sq.reviews.filter.impressions.limit.10-50"},{common:"10&mdash;50",title:"tq.sq.reviews.filter.impressions.limit"})},"tq.sq.reviews.filter.impressions.limit.gte50":{handler:PK.data_tree_node_processor_makers.literal({child_types:[],name:"tq.sq.reviews.filter.impressions.limit.gte50"},{common:"&ge;50",title:"tq.sq.reviews.filter.impressions.limit"})},
"tq.sq.reviews.filter.top50":{handler:PK.data_tree_node_processor_makers.variant({child_types:[],name:"tq.sq.reviews.filter.top50"},{label:"\u0420",title:"Top-50",scopes:{"":[{type:"tq.sq.reviews.filter.top50.off",render_template:"${MENU}${1}",menu_item:"\u0432\u044b\u043a\u043b\u044e\u0447\u0435\u043d\u043e",description:""},{type:"tq.sq.reviews.filter.top50.on",render_template:"${MENU}${1}",menu_item:"\u0432\u043a\u043b\u044e\u0447\u0435\u043d\u043e",description:""}]}})},"tq.sq.reviews.filter.top50.off":{handler:PK.data_tree_node_processor_makers.literal({child_types:[],
name:"tq.sq.reviews.filter.top50.off"},{common:"\u0432\u044b\u043a\u043b\u044e\u0447\u0435\u043d\u043e",title:"tq.sq.reviews.filter.top50"})},"tq.sq.reviews.filter.top50.on":{handler:PK.data_tree_node_processor_makers.literal({child_types:[],name:"tq.sq.reviews.filter.top50.on"},{common:"\u0432\u043a\u043b\u044e\u0447\u0435\u043d\u043e",title:"tq.sq.reviews.filter.top50"})},"tq.sq.reviews.filter.date.off":{handler:PK.data_tree_node_processor_makers.literal({child_types:[],name:"tq.sq.reviews.filter.date.off"},
{common:"\u0432\u044b\u043a\u043b\u044e\u0447\u0435\u043d"})},"tq.sq.reviews.filter.date.on":{handler:PK.data_tree_node_processor_makers.record({child_types:[{type:"tq.date",in_scope:"tq.date.from"},"tq.date"],name:"tq.sq.reviews.filter.date.on"},{common:"<ul>  <li>\u041e\u0442: ${1}</li>  <li>\u0414\u043e: ${2}</li></ul>",title:"\u0424\u0438\u043b\u044c\u0442\u0440\u043e\u0432\u0430\u0442\u044c"})},"tq.sq.reviews":{handler:PK.data_tree_node_processor_makers.record({child_types:["tq.city","tq.user.role",
"tq.sq.reviews.filter.thanks.limit","tq.sq.reviews.filter.thanks.visible","tq.sq.reviews.filter.impressions.limit","tq.sq.reviews.filter.impressions.visible","tq.sq.reviews.filter.top50","tq.sq.reviews.filter.date"],name:"tq.sq.reviews"},{common:"<div>\u041e\u0442\u0437\u044b\u0432\u044b:</div><ul><li>\u0413\u043e\u0440\u043e\u0434: ${1}</li><li>\u0420\u043e\u043b\u044c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f: ${2}</li><li>\u0411\u043b\u0430\u0433\u043e\u0434\u0430\u0440\u043d\u043e\u0441\u0442\u0438: ${3} ${4}</li><li>\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440\u044b: ${5} ${6}</li><li>\u0420\u0435\u0436\u0438\u043c Top-50: ${7}</li><li>  \u0424\u0438\u043b\u044c\u0442\u0440 \u043f\u043e \u0434\u0430\u0442\u0435 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f \u0441\u0432\u044f\u0437\u0430\u043d\u043d\u044b\u0445 \u0441\u0443\u0449\u043d\u043e\u0441\u0442\u0435\u0439:  ${8}</li></ul>",
title:"\u0421\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043a\u0430 \u043f\u043e \u043e\u0442\u0437\u044b\u0432\u0430\u043c"})},"tq.city":{handler:PK.data_tree_node_processor_makers.variant({child_types:[],name:"tq.city"},{label:"\u0413",title:"\u0413\u043e\u0440\u043e\u0434",scopes:{"":[{type:"tq.city.moscow",render_template:"${MENU}${1}",menu_item:"\u041c\u043e\u0441\u043a\u0432\u0430",description:""},{type:"tq.city.saint-petersburg",render_template:"${MENU}${1}",menu_item:"\u0421\u0430\u043d\u043a\u0442-\u041f\u0435\u0442\u0435\u0440\u0431\u0443\u0440\u0433",
description:""},{type:"tq.city.samara",render_template:"${MENU}${1}",menu_item:"\u0421\u0430\u043c\u0430\u0440\u0430",description:""},{type:"tq.city.omsk",render_template:"${MENU}${1}",menu_item:"\u041e\u043c\u0441\u043a",description:""},{type:"tq.city.novosibirsk",render_template:"${MENU}${1}",menu_item:"\u041d\u043e\u0432\u043e\u0441\u0438\u0431\u0438\u0440\u0441\u043a",description:""},{type:"tq.city.ekaterinburg",render_template:"${MENU}${1}",menu_item:"\u0415\u043a\u0430\u0442\u0435\u0440\u0438\u043d\u0431\u0443\u0440\u0433",
description:""},{type:"tq.city.nizhny-novgorod",render_template:"${MENU}${1}",menu_item:"\u041d\u0438\u0436\u043d\u0438\u0439 \u041d\u043e\u0432\u0433\u043e\u0440\u043e\u0434",description:""},{type:"tq.city.rostov-na-donu",render_template:"${MENU}${1}",menu_item:"\u0420\u043e\u0441\u0442\u043e\u0432-\u043d\u0430-\u0414\u043e\u043d\u0443",description:""},{type:"tq.city.ufa",render_template:"${MENU}${1}",menu_item:"\u0423\u0444\u0430",description:""},{type:"tq.city.kazan",render_template:"${MENU}${1}",
menu_item:"\u041a\u0430\u0437\u0430\u043d\u044c",description:""},{type:"tq.city.perm",render_template:"${MENU}${1}",menu_item:"\u041f\u0435\u0440\u043c\u044c",description:""}]}})},"tq.city.moscow":{handler:PK.data_tree_node_processor_makers.literal({child_types:[],name:"tq.city.moscow"},{common:"\u041c\u043e\u0441\u043a\u0432\u0430",title:"tq.city"})},"tq.city.saint-petersburg":{handler:PK.data_tree_node_processor_makers.literal({child_types:[],name:"tq.city.saint-petersburg"},{common:"\u0421\u0430\u043d\u043a\u0442-\u041f\u0435\u0442\u0435\u0440\u0431\u0443\u0440\u0433",
title:"tq.city"})},"tq.city.samara":{handler:PK.data_tree_node_processor_makers.literal({child_types:[],name:"tq.city.samara"},{common:"\u0421\u0430\u043c\u0430\u0440\u0430",title:"tq.city"})},"tq.city.omsk":{handler:PK.data_tree_node_processor_makers.literal({child_types:[],name:"tq.city.omsk"},{common:"\u041e\u043c\u0441\u043a",title:"tq.city"})},"tq.city.novosibirsk":{handler:PK.data_tree_node_processor_makers.literal({child_types:[],name:"tq.city.novosibirsk"},{common:"\u041d\u043e\u0432\u043e\u0441\u0438\u0431\u0438\u0440\u0441\u043a",
title:"tq.city"})},"tq.city.ekaterinburg":{handler:PK.data_tree_node_processor_makers.literal({child_types:[],name:"tq.city.ekaterinburg"},{common:"\u0415\u043a\u0430\u0442\u0435\u0440\u0438\u043d\u0431\u0443\u0440\u0433",title:"tq.city"})},"tq.city.nizhny-novgorod":{handler:PK.data_tree_node_processor_makers.literal({child_types:[],name:"tq.city.nizhny-novgorod"},{common:"\u041d\u0438\u0436\u043d\u0438\u0439 \u041d\u043e\u0432\u0433\u043e\u0440\u043e\u0434",title:"tq.city"})},"tq.city.rostov-na-donu":{handler:PK.data_tree_node_processor_makers.literal({child_types:[],
name:"tq.city.rostov-na-donu"},{common:"\u0420\u043e\u0441\u0442\u043e\u0432-\u043d\u0430-\u0414\u043e\u043d\u0443",title:"tq.city"})},"tq.city.ufa":{handler:PK.data_tree_node_processor_makers.literal({child_types:[],name:"tq.city.ufa"},{common:"\u0423\u0444\u0430",title:"tq.city"})},"tq.city.kazan":{handler:PK.data_tree_node_processor_makers.literal({child_types:[],name:"tq.city.kazan"},{common:"\u041a\u0430\u0437\u0430\u043d\u044c",title:"tq.city"})},"tq.city.perm":{handler:PK.data_tree_node_processor_makers.literal({child_types:[],
name:"tq.city.perm"},{common:"\u041f\u0435\u0440\u043c\u044c",title:"tq.city"})},"tq.date.now":{handler:PK.data_tree_node_processor_makers.literal({child_types:[],name:"tq.date.now"},{common:"\u0421\u0435\u0439\u0447\u0430\u0441"})},"tq.date.value":{handler:PK.data_tree_node_processor_makers.record({child_types:["tq.date.value.day","tq.date.value.month","tq.date.value.year"],name:"tq.date.value"},{common:"${1} / ${2} / ${3}",title:"\u041a\u043e\u043d\u043a\u0440\u0435\u0442\u043d\u0430\u044f \u0434\u0430\u0442\u0430"})},
"tq.date.value.day":{handler:PK.data_tree_node_processor_makers.variant({child_types:[],name:"tq.date.value.day"},{label:"\u0434",title:"\u0414\u0435\u043d\u044c",scopes:{"":[{type:"tq.date.value.day.01",render_template:"${MENU}${1}",menu_item:"01",description:""},{type:"tq.date.value.day.02",render_template:"${MENU}${1}",menu_item:"02",description:""},{type:"tq.date.value.day.03",render_template:"${MENU}${1}",menu_item:"03",description:""},{type:"tq.date.value.day.04",render_template:"${MENU}${1}",
menu_item:"04",description:""},{type:"tq.date.value.day.05",render_template:"${MENU}${1}",menu_item:"05",description:""},{type:"tq.date.value.day.06",render_template:"${MENU}${1}",menu_item:"06",description:""},{type:"tq.date.value.day.07",render_template:"${MENU}${1}",menu_item:"07",description:""},{type:"tq.date.value.day.08",render_template:"${MENU}${1}",menu_item:"08",description:""},{type:"tq.date.value.day.09",render_template:"${MENU}${1}",menu_item:"09",description:""},{type:"tq.date.value.day.10",
render_template:"${MENU}${1}",menu_item:"10",description:""},{type:"tq.date.value.day.11",render_template:"${MENU}${1}",menu_item:"11",description:""},{type:"tq.date.value.day.12",render_template:"${MENU}${1}",menu_item:"12",description:""},{type:"tq.date.value.day.13",render_template:"${MENU}${1}",menu_item:"13",description:""},{type:"tq.date.value.day.14",render_template:"${MENU}${1}",menu_item:"14",description:""},{type:"tq.date.value.day.15",render_template:"${MENU}${1}",menu_item:"15",description:""},
{type:"tq.date.value.day.16",render_template:"${MENU}${1}",menu_item:"16",description:""},{type:"tq.date.value.day.17",render_template:"${MENU}${1}",menu_item:"17",description:""},{type:"tq.date.value.day.18",render_template:"${MENU}${1}",menu_item:"18",description:""},{type:"tq.date.value.day.19",render_template:"${MENU}${1}",menu_item:"19",description:""},{type:"tq.date.value.day.20",render_template:"${MENU}${1}",menu_item:"20",description:""},{type:"tq.date.value.day.21",render_template:"${MENU}${1}",
menu_item:"21",description:""},{type:"tq.date.value.day.22",render_template:"${MENU}${1}",menu_item:"22",description:""},{type:"tq.date.value.day.23",render_template:"${MENU}${1}",menu_item:"23",description:""},{type:"tq.date.value.day.24",render_template:"${MENU}${1}",menu_item:"24",description:""},{type:"tq.date.value.day.25",render_template:"${MENU}${1}",menu_item:"25",description:""},{type:"tq.date.value.day.26",render_template:"${MENU}${1}",menu_item:"26",description:""},{type:"tq.date.value.day.27",
render_template:"${MENU}${1}",menu_item:"27",description:""},{type:"tq.date.value.day.28",render_template:"${MENU}${1}",menu_item:"28",description:""},{type:"tq.date.value.day.29",render_template:"${MENU}${1}",menu_item:"29",description:""},{type:"tq.date.value.day.30",render_template:"${MENU}${1}",menu_item:"30",description:""},{type:"tq.date.value.day.31",render_template:"${MENU}${1}",menu_item:"31",description:""}]}})},"tq.date.value.day.01":{handler:PK.data_tree_node_processor_makers.literal({child_types:[],
name:"tq.date.value.day.01"},{common:"01",title:"tq.date.value.day"})},"tq.date.value.day.02":{handler:PK.data_tree_node_processor_makers.literal({child_types:[],name:"tq.date.value.day.02"},{common:"02",title:"tq.date.value.day"})},"tq.date.value.day.03":{handler:PK.data_tree_node_processor_makers.literal({child_types:[],name:"tq.date.value.day.03"},{common:"03",title:"tq.date.value.day"})},"tq.date.value.day.04":{handler:PK.data_tree_node_processor_makers.literal({child_types:[],name:"tq.date.value.day.04"},
{common:"04",title:"tq.date.value.day"})},"tq.date.value.day.05":{handler:PK.data_tree_node_processor_makers.literal({child_types:[],name:"tq.date.value.day.05"},{common:"05",title:"tq.date.value.day"})},"tq.date.value.day.06":{handler:PK.data_tree_node_processor_makers.literal({child_types:[],name:"tq.date.value.day.06"},{common:"06",title:"tq.date.value.day"})},"tq.date.value.day.07":{handler:PK.data_tree_node_processor_makers.literal({child_types:[],name:"tq.date.value.day.07"},{common:"07",title:"tq.date.value.day"})},
"tq.date.value.day.08":{handler:PK.data_tree_node_processor_makers.literal({child_types:[],name:"tq.date.value.day.08"},{common:"08",title:"tq.date.value.day"})},"tq.date.value.day.09":{handler:PK.data_tree_node_processor_makers.literal({child_types:[],name:"tq.date.value.day.09"},{common:"09",title:"tq.date.value.day"})},"tq.date.value.day.10":{handler:PK.data_tree_node_processor_makers.literal({child_types:[],name:"tq.date.value.day.10"},{common:"10",title:"tq.date.value.day"})},"tq.date.value.day.11":{handler:PK.data_tree_node_processor_makers.literal({child_types:[],
name:"tq.date.value.day.11"},{common:"11",title:"tq.date.value.day"})},"tq.date.value.day.12":{handler:PK.data_tree_node_processor_makers.literal({child_types:[],name:"tq.date.value.day.12"},{common:"12",title:"tq.date.value.day"})},"tq.date.value.day.13":{handler:PK.data_tree_node_processor_makers.literal({child_types:[],name:"tq.date.value.day.13"},{common:"13",title:"tq.date.value.day"})},"tq.date.value.day.14":{handler:PK.data_tree_node_processor_makers.literal({child_types:[],name:"tq.date.value.day.14"},
{common:"14",title:"tq.date.value.day"})},"tq.date.value.day.15":{handler:PK.data_tree_node_processor_makers.literal({child_types:[],name:"tq.date.value.day.15"},{common:"15",title:"tq.date.value.day"})},"tq.date.value.day.16":{handler:PK.data_tree_node_processor_makers.literal({child_types:[],name:"tq.date.value.day.16"},{common:"16",title:"tq.date.value.day"})},"tq.date.value.day.17":{handler:PK.data_tree_node_processor_makers.literal({child_types:[],name:"tq.date.value.day.17"},{common:"17",title:"tq.date.value.day"})},
"tq.date.value.day.18":{handler:PK.data_tree_node_processor_makers.literal({child_types:[],name:"tq.date.value.day.18"},{common:"18",title:"tq.date.value.day"})},"tq.date.value.day.19":{handler:PK.data_tree_node_processor_makers.literal({child_types:[],name:"tq.date.value.day.19"},{common:"19",title:"tq.date.value.day"})},"tq.date.value.day.20":{handler:PK.data_tree_node_processor_makers.literal({child_types:[],name:"tq.date.value.day.20"},{common:"20",title:"tq.date.value.day"})},"tq.date.value.day.21":{handler:PK.data_tree_node_processor_makers.literal({child_types:[],
name:"tq.date.value.day.21"},{common:"21",title:"tq.date.value.day"})},"tq.date.value.day.22":{handler:PK.data_tree_node_processor_makers.literal({child_types:[],name:"tq.date.value.day.22"},{common:"22",title:"tq.date.value.day"})},"tq.date.value.day.23":{handler:PK.data_tree_node_processor_makers.literal({child_types:[],name:"tq.date.value.day.23"},{common:"23",title:"tq.date.value.day"})},"tq.date.value.day.24":{handler:PK.data_tree_node_processor_makers.literal({child_types:[],name:"tq.date.value.day.24"},
{common:"24",title:"tq.date.value.day"})},"tq.date.value.day.25":{handler:PK.data_tree_node_processor_makers.literal({child_types:[],name:"tq.date.value.day.25"},{common:"25",title:"tq.date.value.day"})},"tq.date.value.day.26":{handler:PK.data_tree_node_processor_makers.literal({child_types:[],name:"tq.date.value.day.26"},{common:"26",title:"tq.date.value.day"})},"tq.date.value.day.27":{handler:PK.data_tree_node_processor_makers.literal({child_types:[],name:"tq.date.value.day.27"},{common:"27",title:"tq.date.value.day"})},
"tq.date.value.day.28":{handler:PK.data_tree_node_processor_makers.literal({child_types:[],name:"tq.date.value.day.28"},{common:"28",title:"tq.date.value.day"})},"tq.date.value.day.29":{handler:PK.data_tree_node_processor_makers.literal({child_types:[],name:"tq.date.value.day.29"},{common:"29",title:"tq.date.value.day"})},"tq.date.value.day.30":{handler:PK.data_tree_node_processor_makers.literal({child_types:[],name:"tq.date.value.day.30"},{common:"30",title:"tq.date.value.day"})},"tq.date.value.day.31":{handler:PK.data_tree_node_processor_makers.literal({child_types:[],
name:"tq.date.value.day.31"},{common:"31",title:"tq.date.value.day"})},"tq.date.value.month":{handler:PK.data_tree_node_processor_makers.variant({child_types:[],name:"tq.date.value.month"},{label:"M",title:"\u041c\u0435\u0441\u044f\u0446",scopes:{"":[{type:"tq.date.value.month.01",render_template:"${MENU}${1}",menu_item:"\u042f\u043d\u0432\u0430\u0440\u044c",description:""},{type:"tq.date.value.month.02",render_template:"${MENU}${1}",menu_item:"\u0424\u0435\u0432\u0440\u0430\u043b\u044c",description:""},
{type:"tq.date.value.month.03",render_template:"${MENU}${1}",menu_item:"\u041c\u0430\u0440\u0442",description:""},{type:"tq.date.value.month.04",render_template:"${MENU}${1}",menu_item:"\u0410\u043f\u0440\u0435\u043b\u044c",description:""},{type:"tq.date.value.month.05",render_template:"${MENU}${1}",menu_item:"\u041c\u0430\u0439",description:""},{type:"tq.date.value.month.06",render_template:"${MENU}${1}",menu_item:"\u0418\u044e\u043d\u044c",description:""},{type:"tq.date.value.month.07",render_template:"${MENU}${1}",
menu_item:"\u0418\u044e\u043b\u044c",description:""},{type:"tq.date.value.month.08",render_template:"${MENU}${1}",menu_item:"\u0410\u0432\u0433\u0443\u0441\u0442",description:""},{type:"tq.date.value.month.09",render_template:"${MENU}${1}",menu_item:"\u0421\u0435\u043d\u0442\u044f\u0431\u0440\u044c",description:""},{type:"tq.date.value.month.10",render_template:"${MENU}${1}",menu_item:"\u041e\u043a\u0442\u044f\u0431\u0440\u044c",description:""},{type:"tq.date.value.month.11",render_template:"${MENU}${1}",
menu_item:"\u041d\u043e\u044f\u0431\u0440\u044c",description:""},{type:"tq.date.value.month.12",render_template:"${MENU}${1}",menu_item:"\u0414\u0435\u043a\u0430\u0431\u0440\u044c",description:""}]}})},"tq.date.value.month.01":{handler:PK.data_tree_node_processor_makers.literal({child_types:[],name:"tq.date.value.month.01"},{common:"\u042f\u043d\u0432\u0430\u0440\u044c",title:"tq.date.value.month"})},"tq.date.value.month.02":{handler:PK.data_tree_node_processor_makers.literal({child_types:[],name:"tq.date.value.month.02"},
{common:"\u0424\u0435\u0432\u0440\u0430\u043b\u044c",title:"tq.date.value.month"})},"tq.date.value.month.03":{handler:PK.data_tree_node_processor_makers.literal({child_types:[],name:"tq.date.value.month.03"},{common:"\u041c\u0430\u0440\u0442",title:"tq.date.value.month"})},"tq.date.value.month.04":{handler:PK.data_tree_node_processor_makers.literal({child_types:[],name:"tq.date.value.month.04"},{common:"\u0410\u043f\u0440\u0435\u043b\u044c",title:"tq.date.value.month"})},"tq.date.value.month.05":{handler:PK.data_tree_node_processor_makers.literal({child_types:[],
name:"tq.date.value.month.05"},{common:"\u041c\u0430\u0439",title:"tq.date.value.month"})},"tq.date.value.month.06":{handler:PK.data_tree_node_processor_makers.literal({child_types:[],name:"tq.date.value.month.06"},{common:"\u0418\u044e\u043d\u044c",title:"tq.date.value.month"})},"tq.date.value.month.07":{handler:PK.data_tree_node_processor_makers.literal({child_types:[],name:"tq.date.value.month.07"},{common:"\u0418\u044e\u043b\u044c",title:"tq.date.value.month"})},"tq.date.value.month.08":{handler:PK.data_tree_node_processor_makers.literal({child_types:[],
name:"tq.date.value.month.08"},{common:"\u0410\u0432\u0433\u0443\u0441\u0442",title:"tq.date.value.month"})},"tq.date.value.month.09":{handler:PK.data_tree_node_processor_makers.literal({child_types:[],name:"tq.date.value.month.09"},{common:"\u0421\u0435\u043d\u0442\u044f\u0431\u0440\u044c",title:"tq.date.value.month"})},"tq.date.value.month.10":{handler:PK.data_tree_node_processor_makers.literal({child_types:[],name:"tq.date.value.month.10"},{common:"\u041e\u043a\u0442\u044f\u0431\u0440\u044c",title:"tq.date.value.month"})},
"tq.date.value.month.11":{handler:PK.data_tree_node_processor_makers.literal({child_types:[],name:"tq.date.value.month.11"},{common:"\u041d\u043e\u044f\u0431\u0440\u044c",title:"tq.date.value.month"})},"tq.date.value.month.12":{handler:PK.data_tree_node_processor_makers.literal({child_types:[],name:"tq.date.value.month.12"},{common:"\u0414\u0435\u043a\u0430\u0431\u0440\u044c",title:"tq.date.value.month"})},"tq.date.value.year":{handler:PK.data_tree_node_processor_makers.variant({child_types:[],name:"tq.date.value.year"},
{label:"\u0413",title:"\u0413\u043e\u0434",scopes:{"":[{type:"tq.date.value.year.2012",render_template:"${MENU}${1}",menu_item:"2012",description:""},{type:"tq.date.value.year.2011",render_template:"${MENU}${1}",menu_item:"2011",description:""},{type:"tq.date.value.year.2010",render_template:"${MENU}${1}",menu_item:"2010",description:""},{type:"tq.date.value.year.2009",render_template:"${MENU}${1}",menu_item:"2009",description:""},{type:"tq.date.value.year.2008",render_template:"${MENU}${1}",menu_item:"2008",
description:""},{type:"tq.date.value.year.2007",render_template:"${MENU}${1}",menu_item:"2007",description:""}]}})},"tq.date.value.year.2012":{handler:PK.data_tree_node_processor_makers.literal({child_types:[],name:"tq.date.value.year.2012"},{common:"2012",title:"tq.date.value.year"})},"tq.date.value.year.2011":{handler:PK.data_tree_node_processor_makers.literal({child_types:[],name:"tq.date.value.year.2011"},{common:"2011",title:"tq.date.value.year"})},"tq.date.value.year.2010":{handler:PK.data_tree_node_processor_makers.literal({child_types:[],
name:"tq.date.value.year.2010"},{common:"2010",title:"tq.date.value.year"})},"tq.date.value.year.2009":{handler:PK.data_tree_node_processor_makers.literal({child_types:[],name:"tq.date.value.year.2009"},{common:"2009",title:"tq.date.value.year"})},"tq.date.value.year.2008":{handler:PK.data_tree_node_processor_makers.literal({child_types:[],name:"tq.date.value.year.2008"},{common:"2008",title:"tq.date.value.year"})},"tq.date.value.year.2007":{handler:PK.data_tree_node_processor_makers.literal({child_types:[],
name:"tq.date.value.year.2007"},{common:"2007",title:"tq.date.value.year"})},"tq.user.role":{handler:PK.data_tree_node_processor_makers.variant({child_types:[],name:"tq.user.role"},{label:"\u0440",title:"\u0420\u043e\u043b\u044c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f",scopes:{"":[{type:"tq.user.role.any",render_template:"${MENU}${1}",menu_item:"\u041b\u044e\u0431\u0430\u044f",description:""},{type:"tq.user.role.tulper",render_template:"${MENU}${1}",menu_item:"\u0422\u044e\u043b\u044c\u043f\u0435\u0440",
description:""},{type:"tq.user.role.press-manager",render_template:"${MENU}${1}",menu_item:"\u041f\u0440\u0435\u0441\u0441-\u043c\u0435\u043d\u0435\u0434\u0436\u0435\u0440",description:""}]}})},"tq.user.role.any":{handler:PK.data_tree_node_processor_makers.literal({child_types:[],name:"tq.user.role.any"},{common:"\u041b\u044e\u0431\u0430\u044f",title:"tq.user.role"})},"tq.user.role.tulper":{handler:PK.data_tree_node_processor_makers.literal({child_types:[],name:"tq.user.role.tulper"},{common:"\u0422\u044e\u043b\u044c\u043f\u0435\u0440",
title:"tq.user.role"})},"tq.user.role.press-manager":{handler:PK.data_tree_node_processor_makers.literal({child_types:[],name:"tq.user.role.press-manager"},{common:"\u041f\u0440\u0435\u0441\u0441-\u043c\u0435\u043d\u0435\u0434\u0436\u0435\u0440",title:"tq.user.role"})}};PK.node_schema_version={name:"ru.tulp.qb.reviews","1":0,"2":0,"3":2};
